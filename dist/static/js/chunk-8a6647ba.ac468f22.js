(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-8a6647ba"],{7598:function(t,e,s){},b3d7:function(t,e,s){"use strict";s.r(e);s("99af"),s("a9e3");var a=s("2909"),i=s("6a57"),n={name:"Reviews",data:function(){return{items:[],dropdownTitle:"",pageIndex:1,refresh:!1,status:"",dateTitle:"",date:1}},created:function(){this.dropdownTitle=this.$$t("all"),this.dateTitle=this.$$t("today"),this.onLoad()},computed:{statusOptions:function(){return[{text:this.$$t("all"),value:""},{text:this.$$t("tab_1"),value:"0"},{text:this.$$t("tab_2"),value:"2"},{text:this.$$t("tab_3"),value:"-1"}]},startDate:function(){return 60===this.date?this.getLastMonthFirst():30===this.date?this.getCurrentMonthFirst():7===this.date?Object(i.d)(Object(i.b)(new Date,7),"yyyy-MM-dd"):3===this.date?Object(i.d)(Object(i.b)(new Date,2),"yyyy-MM-dd"):2===this.date?Object(i.d)(Object(i.b)(new Date,1),"yyyy-MM-dd"):Object(i.d)(Object(i.b)(new Date,0),"yyyy-MM-dd")},dateOptions:function(){return[{text:this.$$t("lastMonth"),value:60},{text:this.$$t("nearlyAMonth"),value:30},{text:this.$$t("nearlySevenDays"),value:7},{text:this.$$t("nearlyTwoDays"),value:3},{text:this.$$t("yesterday"),value:2},{text:this.$$t("today"),value:1}]},endDate:function(){var t=Number(this.date);return 7===t||1===t||30===t?Object(i.d)(new Date,"yyyy-MM-dd"):60===t?this.getLastMonthLastDay():Object(i.d)(Object(i.b)(new Date,t-1),"yyyy-MM-dd")}},watch:{status:function(){this.onRefresh()},date:function(){this.onRefresh()}},methods:{onLoad:function(t){var e=this;this.showProgress(),this.$get("/api/Activity/GetReceiveRecordList?pageSize=10&pageIndex=".concat(this.pageIndex,"&status=").concat(this.status,"&startDate=").concat(this.startDate,"&endDate=").concat(this.endDate)).then((function(t){return e.checkResp(t,(function(t){return!0===t.data.success}))})).then((function(s){var i,n=s.data;(e.pageIndex=e.pageIndex+1,e.refresh)?(e.items=[],e.items=n.items,t&&(e.refresh=!1,t())):n.items.length>0?((i=e.items).push.apply(i,Object(a.a)(n.items)),t&&t(!1)):t&&t(!0);e.showProgress(!1)})).catch((function(s){t&&t(!0),e.showProgress(!1),e.procError(s)}))},goDetails:function(t){this.$router.push({path:"reviews/details",query:{id:t.objId}})},onRefresh:function(t){this.refresh=!0,this.pageIndex=1,this.onLoad(t)},getStatus:function(t){return 0===t?this.$$t("status_0"):1===t?this.$$t("status_1"):2===t?this.$$t("status_2"):-1===t?this.$$t("status_3"):void 0},typeClick:function(t){this.dropdownTitle=t.text,this.status=t.value,this.$refs.type.toggle()},dateClick:function(t){this.dateTitle=t.text,this.date=t.value,this.$refs.date.toggle()},$$t:function(t){return this.$t("reviews."+t)}}},r=(s("d7f2"),s("2877")),o=Object(r.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"reviews"}},[s("div",{staticClass:"reviews-top"},[s("van-row",{attrs:{type:"flex",justify:"space-between"}},[s("van-col",{attrs:{span:"6"}},[t._v(t._s(t.$$t("title_1")))]),s("van-col",{attrs:{span:"6"}},[t._v(t._s(t.$$t("title_2")))]),s("van-col",{staticClass:"van-ellipsis",attrs:{span:"6"}},[t._v(t._s(t.$$t("title_3")))]),s("van-col",{attrs:{span:"6"}},[t._v(t._s(t.$$t("title_4")))])],1)],1),s("div",{staticClass:"mt-3 px-4"},[s("van-dropdown-menu",{attrs:{"active-color":"rgb(70 132 255)"}},[s("van-dropdown-item",{ref:"type",attrs:{title:t.dropdownTitle}},[s("div",{staticClass:"dropdown-warp"},[s("div",{staticClass:"btns"},t._l(t.statusOptions,(function(e,a){return s("div",{key:a,staticClass:"btn van-ellipsis",class:{active:t.status===e.value},on:{click:function(s){return t.typeClick(e)}}},[s("span",[t._v(t._s(e.text))])])})),0)])]),s("van-dropdown-item",{ref:"date",attrs:{title:t.dateTitle}},[s("div",{staticClass:"dropdown-warp"},[s("div",{staticClass:"btns"},t._l(t.dateOptions,(function(e,a){return s("div",{key:a,staticClass:"btn van-ellipsis",class:{active:t.date===e.value},on:{click:function(s){return t.dateClick(e)}}},[s("span",[t._v(t._s(e.text))])])})),0)])])],1)],1),s("div",{staticClass:"reviews-center"},[s("scroll-view",{attrs:{onRefresh:t.onRefresh,loadMore:t.onLoad}},[s("div",{staticClass:"warp"},[t.items.length>0?s("div",t._l(t.items,(function(e,a){return s("div",{key:a,on:{click:function(s){return t.goDetails(e)}}},[s("div",{staticClass:"item pl-3 py-4"},[s("van-row",{attrs:{type:"flex",justify:"space-between",align:"center"}},[s("van-col",{staticClass:"text-left",attrs:{span:"6"}},[t._v(t._s(e.activityTitle))]),s("van-col",{attrs:{span:"6"}},[t._v(t._s(e.activityReceiveParam))]),s("van-col",{attrs:{span:"6"}},[t._v(t._s(t.formatDate(e.createTime)))]),s("van-col",{staticClass:"status_color",attrs:{span:"6"}},[t._v(t._s(t.getStatus(e.status)))])],1)],1),s("van-divider",{staticClass:"ma-0"})],1)})),0):s("van-empty",{staticClass:"text-center",attrs:{description:t.$t("common.noMore")},scopedSlots:t._u([{key:"image",fn:function(){return[s("van-image",{attrs:{src:"/images/empty/no-more.png",width:"280",height:"130"}})]},proxy:!0}])})],1)])],1)])}),[],!1,null,"53339986",null);e.default=o.exports},d7f2:function(t,e,s){"use strict";s("7598")}}]);