(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-09431367"],{"0b7a":function(t,a,e){"use strict";e("3037")},3037:function(t,a,e){},d5a7:function(t,a,e){"use strict";e.r(a);e("ac1f"),e("5319"),e("1276");var r=e("5530"),c=e("61f7"),s={name:"AddVirtual",data:function(){return{card:{payeeName:null,bankCardNumber:null,bankName:null,currencyType:1,address:null,verifiedBankNumber:""},virtuals:[],protocols:[],isVerifyBankNumber:!1}},created:function(){this.onLoadCurrency(),this.getVerifyBankNumber()},methods:{formatter:function(t){return t.replace(/[^\a-\z\A-\Z0-9]/g,"")},getVerifyBankNumber:function(){var t=this;this.$get("/api/Account/GetVerifyBankNumber").then((function(a){return t.checkResp(a,(function(t){return!0===t.data.success}))})).then((function(a){t.isVerifyBankNumber=a.data})).catch((function(a){t.procError(a)}))},onLoadCurrency:function(){var t=this;this.$post("/api/Account/GetVirtualCurrency").then((function(a){return t.checkResp(a,(function(t){return!0===t.data.success}))})).then((function(a){var e=a.data;t.virtuals=e,t.card.bankName=e[0].code;var r=e&&e[0].protocol;r&&(t.protocols=r.split(",")),t.card.address=t.protocols[0]})).catch((function(a){t.procError(a)}))},bindVirtual:function(){var t=this;if(Object(c.c)(this.card.payeeName,this.$$t("payeeName"))&&Object(c.c)(this.card.bankCardNumber,this.$$t("cardNo"))&&Object(c.c)(this.card.bankName,this.$$t("bankName"))){var a=Object(r.a)({},this.card);this.isVerifyBankNumber||delete a.verifiedBankNumber,this.$post("/api/Account/BindMemberBankCard",a).then((function(a){return t.checkResp(a,(function(t){return!0===t.data.success}))})).then((function(a){t.$success(a.data),t.$router.back()})).catch((function(a){t.procError(a)}))}},changeVirtual:function(t){this.card.bankName=t.code,t.protocol?(this.protocols=t.protocol.split(","),this.card.address=this.protocols[0]):(this.protocols=[],this.card.address="")},changeProtocol:function(t){this.card.address=t},$$t:function(t){return this.$t("addVirtual."+t)}}},n=(e("0b7a"),e("2877")),i=Object(n.a)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"background-white",attrs:{id:"addVirtual"}},[e("div",{staticClass:"pt-9"},[e("div",{staticClass:"subtitle-3 px-4"},[t._v(t._s(t.$$t("payeeName")))]),e("van-field",{staticClass:"mb-1",attrs:{placeholder:t.$$t("payeeNameDesc")},model:{value:t.card.payeeName,callback:function(a){t.$set(t.card,"payeeName",a)},expression:"card.payeeName"}}),e("div",{staticClass:"subtitle-3 px-4 mb-1 mt-4"},[t._v(t._s(t.$$t("bankName")))]),e("div",{staticClass:"mt-4 flex virtual_name"},[t._l(t.virtuals,(function(a,r){return[e("div",{key:r,staticClass:"ml-4 px-5 py-2",class:{active:t.card.bankName===a.code},on:{click:function(e){return t.changeVirtual(a)}}},[t._v(t._s(a.name))])]}))],2),e("div",{staticClass:"subtitle-3 px-4 mb-1 mt-4"},[t._v(t._s(t.$$t("cardNo")))]),e("van-field",{attrs:{formatter:t.formatter,placeholder:t.$$t("cardNoDesc")},model:{value:t.card.bankCardNumber,callback:function(a){t.$set(t.card,"bankCardNumber",a)},expression:"card.bankCardNumber"}}),t.protocols&&t.protocols.length>0?e("div",[e("div",{staticClass:"subtitle-3 px-4 mb-1 mt-4"},[t._v(t._s(t.$$t("protocol")))]),e("div",{staticClass:"mt-4 flex virtual_name"},[t._l(t.protocols,(function(a,r){return[e("div",{key:r,staticClass:"ml-4 px-5 py-2 mb-3",class:{active:t.card.address===a},on:{click:function(e){return t.changeProtocol(a)}}},[t._v(t._s(a))])]}))],2)]):t._e(),t.isVerifyBankNumber?[e("div",{staticClass:"subtitle-3 px-4 mb-1 mt-4"},[t._v(t._s(t.$t("addBank.cardNo")))]),e("van-field",{attrs:{type:"digit",placeholder:t.$$t("bindBankCardNumberDesc")},model:{value:t.card.verifiedBankNumber,callback:function(a){t.$set(t.card,"verifiedBankNumber",a)},expression:"card.verifiedBankNumber"}})]:t._e(),e("div",{staticClass:"mt-9 px-4 text-grey"},[t._v(t._s(t.$$t("cardNoT")))])],2),e("div",{staticClass:"btn mt-5"},[e("van-button",{staticClass:"radius-2",attrs:{color:"linear-gradient(to right, rgb(129, 170, 255), rgb(70, 132, 255))",block:""},on:{click:t.bindVirtual}},[t._v(" "+t._s(t.$$t("bindVirtual"))+" ")])],1)])}),[],!1,null,"96c69192",null);a.default=i.exports}}]);