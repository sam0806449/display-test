(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-098f55e6"],{"23bc":function(e,t,r){"use strict";r("a274")},a274:function(e,t,r){},afd8:function(e,t,r){"use strict";r("4de4"),r("a9e3");t.a={countryCodes:[{english_name:"Chinese",chinese_name:"中国",country_code:"CN",phone_code:"86"},{english_name:"United States",chinese_name:"美国",country_code:"US",phone_code:"1"},{english_name:"Vietnam",chinese_name:"越南",country_code:"VN",phone_code:"84"},{english_name:"Thailand",chinese_name:"泰国",country_code:"TH",phone_code:"66"},{english_name:"Indonesia",chinese_name:"印度尼西亚",country_code:"ID",phone_code:"62"},{english_name:"India",chinese_name:"印度",country_code:"IN",phone_code:"91"}],getPhoneCode:function(e){if(!e)return"";var t=this.countryCodes.filter((function(t){return t.country_code===e}));return t.length>0?t[0].phone_code:""},getCountryCode:function(e){if(!e)return"";var t=this.countryCodes.filter((function(t){return Number(t.phone_code)===Number(e)}));return t.length>0?t[0].country_code:""}}},d7f7:function(e,t,r){"use strict";r.r(t);r("99af"),r("4de4"),r("caad"),r("d81d"),r("45fc"),r("b0c0");var s=r("61f7"),o=r("afd8"),n={name:"AgentRegister",data:function(){return{verifyCodeImg:"images/account/vcode.png",regFields:[],passwordType:"password",currencys:[],currency:"",bankNames:[],showCurrency:!1,showBanks:!1,showKeyboard:!1,regForm:{memberAccount:"",memberName:"",tel:"",email:"",qq:"",wechat:"",facebook:"",whatsapp:"",bankAccount:"",bankName:"",bankAddress:"",safetyPassword:"",password:"",confirmPassword:"",verifyCodeKey:"",verifyCode:"",currencyCode:"",currencySymbol:"",TelPrefix:""},phoneCod:""}},computed:{filterRegFields:function(){return this.regFields.filter((function(e){return!["phone","email"].includes(e.fieldName)}))},phoneRegFields:function(){return this.regFields.filter((function(e){return"phone"===e.fieldName}))[0]},emailRegFields:function(){return this.regFields.filter((function(e){return"email"===e.fieldName}))[0]}},watch:{"regForm.currencyCode":function(e){this.onLoadBanks(e)}},created:function(){this.getCurrency(),this.getRegisterFields()},methods:{handleValid:function(){return this.validOther(this.regForm.memberName,!0,"memberName")&&Object(s.j)(this.regForm.memberAccount)&&Object(s.i)(this.regForm.password)&&Object(s.f)(this.regForm.password,this.regForm.confirmPassword)&&this.validOther(this.regForm.tel,this.phoneRegFields.isShow&&this.phoneRegFields.isRequired,"tel")&&this.validOther(this.regForm.email,this.emailRegFields.isShow&&this.emailRegFields.isRequired,"email")&&Object(s.e)(this.regForm.bankAccount)&&this.validOther(this.regForm.bankAddress,!0,"bankAddress")&&this.validOtherRegFields()&&Object(s.k)(this.regForm.verifyCode)&&this.validOther(this.regForm.safetyPassword,!0,"safetyPassword")},validOther:function(e,t,r){return!t||(null===e||""===e?(["tel","email","memberName","bankAddress","safetyPassword"].includes(r)?this.$toast("".concat(this.$$t(r)).concat(this.$t("common.noNull"))):this.$toast("".concat(r).concat(this.$t("common.noNull"))),!1):!("safetyPassword"===r&&e.length<4)||(this.$toast("".concat(this.$$t(r)).concat(this.$t("validate.incorrectLength"))),!1))},validOtherRegFields:function(){var e=this;return!this.filterRegFields.some((function(t){return!(!t.isShow||!t.isRequired)&&((""===e.regForm[t.fieldName]||null===e.regForm[t.fieldName])&&(e.$toast("".concat(t.cnName).concat(e.$t("common.noNull"))),!0))}))},registerClick:function(){var e=this;this.handleValid()&&(this.showProgress(),this.regForm.TelPrefix=this.phoneCod,this.$post("/api/Agent/Register",this.regForm).then((function(t){return e.checkResp(t,(function(e){return!0===e.data.success}))})).then((function(t){e.showProgress(!1),e.$success(t.data)})).catch((function(t){e.showProgress(!1),e.regForm.verifyCode=null,e.getVerification(),e.procError(t)})))},onLoadBanks:function(e){var t=this;this.$post("/api/Withdraw/GetAllCustomBank?currencyCode="+e).then((function(e){return t.checkResp(e,(function(e){return!0===e.data.success}))})).then((function(e){var r=e.data;r.length<=0||(t.bankNames=r.map((function(e){return e.bankName})),t.regForm.bankName=t.bankNames[0])})).catch((function(e){t.procError(e)}))},getRegisterFields:function(){var e=this;this.$post("/api/Agent/GetSystemAgentSetting").then((function(t){return e.checkResp(t,(function(e){return!0===e.data.success}))})).then((function(t){var r=t.data;e.regFields=r.registerFields})).catch((function(t){e.procError(t)}))},getVerification:function(){var e=this;this.showProgress(!0),this.$post("/api/Account/GetVerifyImg").then((function(t){return e.checkResp(t,(function(e){return!0===e.data.success}))})).then((function(t){e.showProgress(!1);var r=t.data;e.verifyCodeImg="data:image/png;base64,"+r.img,e.regForm.verifyCodeKey=r.key})).catch((function(t){e.showProgress(!1),e.procError(t)}))},getCurrency:function(){var e=this;this.$post("/api/Account/GetCurrency").then((function(t){return e.checkResp(t,(function(e){return!0===e.data.success}))})).then((function(t){var r=t.data;e.currencys=r;var s=r.filter((function(e){return!0===e.isDefault})),o=e.$route.query.countryCode||s[0]&&s[0].code;o&&e.setCode(o)})).catch((function(t){e.procError(t)}))},setCode:function(e){var t=this.currencys.filter((function(t){return t.code===e}))[0];this.regForm.currencyCode=t.code,this.regForm.currencySymbol=t.symbol,this.currency=t.name;var r=t.cultureCode.substring(5,3);this.phoneCod=o.a.getPhoneCode(r)},changeType:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},onConfirm:function(e){this.regForm.currencyCode=e.code,this.regForm.currencySymbol=e.symbol,this.currency=e.name;var t=e.cultureCode.substring(5,3);this.phoneCod=o.a.getPhoneCode(t),this.showCurrency=!1},onConfirmBanks:function(e){this.showBanks&&(this.regForm.bankName=e,this.showBanks=!1)},$$t:function(e){return this.$t("agentRegister."+e)}}},i=(r("23bc"),r("2877")),a=Object(i.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"agentRegister"}},[r("scroller",[r("div",{staticClass:"px-4 py-3 text-left"},[r("div",{staticClass:"background-white pt-4 pb-5 radius-2 px-6"},[r("div",{staticClass:"subtitle-3 mb-1"},[r("span",{staticClass:"required"},[e._v("*")]),e._v(e._s(e.$$t("memberName")))]),r("van-field",{attrs:{border:!1,placeholder:""+e.$$t("pLeft")+e.$$t("memberName")},model:{value:e.regForm.memberName,callback:function(t){e.$set(e.regForm,"memberName",t)},expression:"regForm.memberName"}}),r("div",{staticClass:"subtitle-3 mt-3 mb-1"},[r("span",{staticClass:"required"},[e._v("*")]),e._v(e._s(e.$$t("memberAccount")))]),r("van-field",{attrs:{border:!1,type:"url",placeholder:""+e.$$t("pLeft")+e.$$t("memberAccount")},model:{value:e.regForm.memberAccount,callback:function(t){e.$set(e.regForm,"memberAccount",t)},expression:"regForm.memberAccount"}}),r("div",{staticClass:"subtitle-3 mt-3 mb-1"},[r("span",{staticClass:"required"},[e._v("*")]),e._v(e._s(e.$$t("password")))]),r("van-field",{ref:"password",attrs:{border:!1,placeholder:""+e.$$t("pLeft")+e.$$t("password"),type:e.passwordType},on:{"click-right-icon":e.changeType},model:{value:e.regForm.password,callback:function(t){e.$set(e.regForm,"password",t)},expression:"regForm.password"}},[r("van-icon",{attrs:{slot:"right-icon",name:e.passwordType?"closed-eye":"eye-o",size:"20",color:"#333333"},slot:"right-icon"})],1),r("div",{staticClass:"subtitle-3 mt-3 mb-1"},[r("span",{staticClass:"required"},[e._v("*")]),e._v(e._s(e.$$t("confirmPassword")))]),r("van-field",{attrs:{border:!1,placeholder:""+e.$$t("pLeft")+e.$$t("confirmPassword"),type:e.passwordType},on:{"click-right-icon":e.changeType},model:{value:e.regForm.confirmPassword,callback:function(t){e.$set(e.regForm,"confirmPassword",t)},expression:"regForm.confirmPassword"}},[r("van-icon",{attrs:{slot:"right-icon",name:e.passwordType?"closed-eye":"eye-o",size:"20",color:"#333333"},slot:"right-icon"})],1),e.phoneRegFields&&e.phoneRegFields.isShow?[r("div",{staticClass:"subtitle-3 mt-3 mb-1"},[r("span",{staticClass:"required"},[e._v(e._s(e.phoneRegFields.isRequired?"*":""))]),e._v(e._s(e.phoneRegFields.cnName))]),r("van-field",{attrs:{border:!1,placeholder:""+e.$$t("pLeft")+e.phoneRegFields.cnName},model:{value:e.regForm.tel,callback:function(t){e.$set(e.regForm,"tel",t)},expression:"regForm.tel"}},[r("div",{attrs:{slot:"left-icon"},on:{click:function(t){return e.redirectRouter("/app/joint/searchCountry")}},slot:"left-icon"},[r("div",{staticClass:"flex align-items-center"},[r("div",{staticClass:"mr-1"},[e._v(e._s("+"+e.phoneCod))]),r("van-icon",{attrs:{name:"arrow-down"}})],1)])])]:e._e(),e.emailRegFields&&e.emailRegFields.isShow?[r("div",{staticClass:"subtitle-3 mt-3 mb-1"},[r("span",{staticClass:"required"},[e._v(e._s(e.emailRegFields.isRequired?"*":""))]),e._v(e._s(e.emailRegFields.cnName))]),r("van-field",{attrs:{border:!1,placeholder:""+e.$$t("pLeft")+e.emailRegFields.cnName},model:{value:e.regForm.email,callback:function(t){e.$set(e.regForm,"email",t)},expression:"regForm.email"}})]:e._e(),r("div",{staticClass:"subtitle-3 mt-3 mb-1"},[r("span",{staticClass:"required"},[e._v("*")]),e._v(e._s(e.$$t("currency")))]),r("van-field",{attrs:{readonly:"",clickable:"","right-icon":"arrow",value:e.currency},on:{click:function(t){e.showCurrency=!0}}}),r("div",{staticClass:"subtitle-3 mt-3 mb-1"},[r("span",{staticClass:"required"},[e._v("*")]),e._v(e._s(e.$$t("bankName")))]),r("van-field",{attrs:{border:!1,"right-icon":"arrow",readonly:"",clickable:"",placeholder:""+e.$$t("pLeft")+e.$$t("bankName")},on:{click:function(t){e.showBanks=!0}},model:{value:e.regForm.bankName,callback:function(t){e.$set(e.regForm,"bankName",t)},expression:"regForm.bankName"}}),r("div",{staticClass:"subtitle-3 mt-3 mb-1"},[r("span",{staticClass:"required"},[e._v("*")]),e._v(e._s(e.$$t("bankAccount")))]),r("van-field",{attrs:{border:!1,placeholder:""+e.$$t("pLeft")+e.$$t("bankAccount")},model:{value:e.regForm.bankAccount,callback:function(t){e.$set(e.regForm,"bankAccount",t)},expression:"regForm.bankAccount"}}),r("div",{staticClass:"subtitle-3 mt-3 mb-1"},[r("span",{staticClass:"required"},[e._v("*")]),e._v(e._s(e.$$t("bankAddress")))]),r("van-field",{attrs:{border:!1,placeholder:""+e.$$t("pLeft")+e.$$t("bankAddress")},model:{value:e.regForm.bankAddress,callback:function(t){e.$set(e.regForm,"bankAddress",t)},expression:"regForm.bankAddress"}}),e._l(e.filterRegFields,(function(t,s){return[r("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"f.isShow"}],key:s},[r("div",{staticClass:"subtitle-3 mt-3"},[r("span",{staticClass:"required"},[e._v(e._s(t.isRequired?"*":""))]),e._v(" "+e._s(t.cnName)+" ")]),r("van-field",{attrs:{border:!1,maxlength:"30",placeholder:""+e.$$t("pLeft")+t.cnName},model:{value:e.regForm[t.fieldName],callback:function(r){e.$set(e.regForm,t.fieldName,r)},expression:"regForm[f.fieldName]"}})],1)]})),r("div",{staticClass:"verification mt-5 mb-1"},[r("div",{staticClass:"subtitle-3 mt-3"},[r("span",{staticClass:"required"},[e._v("*")]),e._v(e._s(e.$$t("verifyCode")))]),r("van-field",{attrs:{border:!1,type:"digit",maxlength:"4",placeholder:""+e.$$t("pLeft")+e.$$t("verifyCode")},on:{"~focus":function(t){return e.getVerification(t)},"click-right-icon":e.getVerification},model:{value:e.regForm.verifyCode,callback:function(t){e.$set(e.regForm,"verifyCode",t)},expression:"regForm.verifyCode"}},[r("van-image",{attrs:{slot:"right-icon",src:e.verifyCodeImg,width:"60",height:"30"},slot:"right-icon"})],1)],1),r("div",{staticClass:"subtitle-3 mt-3 mb-1"},[r("span",{staticClass:"required"},[e._v("*")]),e._v(e._s(e.$$t("safetyPassword")))]),r("van-password-input",{attrs:{value:e.regForm.safetyPassword,length:4,gutter:12,focused:e.showKeyboard},on:{focus:function(t){e.showKeyboard=!0}}}),r("div",{staticClass:"mt-16"},[r("van-button",{staticClass:"radius-2",attrs:{type:"info",block:""},on:{click:e.registerClick}},[e._v(e._s(e.$$t("btn"))+" ")])],1)],2)])]),r("van-popup",{attrs:{"safe-area-inset-bottom":"",round:"",position:"bottom"},model:{value:e.showBanks,callback:function(t){e.showBanks=t},expression:"showBanks"}},[r("van-picker",{attrs:{"show-toolbar":"",columns:e.bankNames},on:{cancel:function(t){e.showBanks=!1},confirm:e.onConfirmBanks}})],1),r("van-number-keyboard",{attrs:{maxlength:4,show:e.showKeyboard},on:{blur:function(t){e.showKeyboard=!1}},model:{value:e.regForm.safetyPassword,callback:function(t){e.$set(e.regForm,"safetyPassword",t)},expression:"regForm.safetyPassword"}}),r("van-popup",{attrs:{"safe-area-inset-bottom":"",position:"bottom"},model:{value:e.showCurrency,callback:function(t){e.showCurrency=t},expression:"showCurrency"}},[r("van-picker",{attrs:{"show-toolbar":"","value-key":"name",columns:e.currencys},on:{cancel:function(t){e.showCurrency=!1},confirm:e.onConfirm}})],1)],1)}),[],!1,null,"1b62fcfc",null);t.default=a.exports}}]);