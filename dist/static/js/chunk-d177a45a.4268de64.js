(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-d177a45a"],{"4e6d":function(t,i,e){"use strict";e("eb91")},"95b2":function(t,i,e){"use strict";e.r(i);e("c740"),e("4160"),e("d81d"),e("b0c0"),e("a9e3"),e("159b");var s={name:"Turntable",components:{LuckyWheel:e("a280").LuckyWheel},data:function(){return{showPopup:!1,giftType:0,gift_1:{giftImg:"",giftText:"",giftObjId:""},gift_0:{money:0},receiveId:"",item:null,prizes:[],buttons:[{radius:"40px",imgs:[{src:"/images/turntable/lottery_btn.png",padding:"30px",width:"100%",top:"-124%"}]}],blocks:[{padding:"38px",imgs:[{src:"/images/turntable/lottery_bg.png",width:"100%",rotate:!1}]}],defaultStyle:{fontSize:"12px",fontWeight:"500",fontColor:"rgb(176, 121, 0)"},defaultConfig:{gutter:"1px"},dayFreeTimes:0}},activated:function(){this.onGetTurntableInfo()},methods:{onGetTurntableInfo:function(t){var i=this;this.$post("/api/Turntable/GetTurntableInfo").then((function(t){return i.checkResp(t,(function(t){return!0===t.data.success}))})).then((function(e){var s=e.data;if(t)i.dayFreeTimes=s.dayFreeTimes;else{i.dayFreeTimes=s.dayFreeTimes;var a=[];i.item=s;var n=s.turntableGift.map((function(t){return{name:1===t.giftType?t.name:2===t.giftType?t.giftTypeDesc:t.bonus+t.giftTypeDesc,img:i.getImg(t),giftType:t.giftType,bonus:t.bonus}}));n.forEach((function(t,e){a.push({name:t.name,background:e%2==0?"white":"rgb(255, 219, 84)",fonts:[{text:t.name,top:"10%"}],imgs:[{src:t.img,width:i.getWidth(n),top:"32%"}],giftType:t.giftType,bonus:t.bonus})})),i.prizes=a}})).catch((function(t){i.procError(t)}))},onTurntable:function(){var t=this;this.item.dayFreeTimes<1?this.$info(this.$$t("dayFreeTimes_t")):(this.showProgress(),this.$post("/api/Turntable/Turntable").then((function(i){return t.checkResp(i,(function(t){return!0===t.data.success}))})).then((function(i){t.showProgress(!1);var e=i.data;t.gift_1.giftObjId=e.recordObjId,t.receiveId=e.giftObjId;var s=t.item.turntableGift.findIndex((function(t){return t.objId===e.giftObjId}));t.startCallBack(Number(s))})).catch((function(i){t.showProgress(!1),t.procError(i)})))},onReceiveGift:function(){1===this.giftType?this.$info(this.$$t("kf")):this.$info(this.$$t("failed"))},getImg:function(t){return 0===t.giftType?"/images/turntable/money.png":1===t.giftType?this.$portrait(t.pic):"/images/turntable/ThanksForJoin.png"},getWidth:function(t){return 0===t.giftType?"40px":1===t.giftType?"48px":"35px"},startCallBack:function(t){var i=this;this.$refs.LuckyWheel.play(),setTimeout((function(){i.$refs.LuckyWheel.stop(t)}),3e3)},endCallBack:function(t){this.giftType=t.giftType,1===t.giftType?(this.gift_1.giftImg=t.imgs[0].src,this.gift_1.giftText=t.name):0===t.giftType&&(this.gift_0.money=t.bonus),this.showPopup=!0,this.onGetTurntableInfo(!0)},$$t:function(t,i){return this.$t("turntable."+t,i)}}},a=(e("4e6d"),e("2877")),n=Object(a.a)(s,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"turntable"}},[t._m(0),e("scroller",[e("div",{staticClass:"warps pt-5 px-4 pb-10"},[e("div",{staticClass:"title"},[t._v(t._s(t.$$t("title")))]),e("div",{staticClass:"number_text caption red-text"},[t._v(t._s(t.$$t("dayFreeTimes",{number:t.dayFreeTimes})))]),e("div",{staticClass:"mt-7"},[e("lucky-wheel",{ref:"LuckyWheel",staticClass:"luck-draw",attrs:{width:"9.1467rem",height:"9.1467rem",blocks:t.blocks,prizes:t.prizes,buttons:t.buttons,"default-style":t.defaultStyle,"default-config":t.defaultConfig},on:{start:t.onTurntable,end:t.endCallBack}})],1),e("div",{staticClass:"rules px-6"},[e("div",{staticClass:"rules_title headline"},[t._v(t._s(t.$$t("rules")))]),e("div",{staticClass:"mt-6 body-2 text-left text-grey"},[e("div",{domProps:{innerHTML:t._s(t.item&&t.item.rule)}})])])])]),e("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:t.showPopup,callback:function(i){t.showPopup=i},expression:"showPopup"}},[e("div",{staticClass:"gift px-5"},[e("div",{staticClass:"title pt-4"},[t._v(t._s(2===t.giftType?t.$$t("giftType_2"):t.$$t("giftType_1")))]),0===t.giftType||1===t.giftType?e("div",{staticClass:"gift_img mt-2"},[0===t.giftType?e("div",[e("van-image",{staticClass:"gift_img_center",attrs:{src:"/images/turntable/money_bg.png",width:"110px",height:"110px"}}),e("div",{staticClass:"money_text"},[t._v(t._s(t.gift_0&&t.gift_0.money))]),e("van-image",{staticClass:"gift_img_b",attrs:{src:"/images/turntable/gift_img_b.png"}})],1):1===t.giftType?e("div",[e("van-image",{staticClass:"gift_img_center",attrs:{src:t.gift_1&&t.gift_1.giftImg,width:"110px",height:"110px"}}),e("van-image",{staticClass:"gift_img_b",attrs:{src:"/images/turntable/gift_img_b.png"}})],1):t._e()]):e("div",{staticStyle:{"margin-top":"50px"}},[e("van-image",{attrs:{src:"/images/turntable/gift_2.png",width:"80px",height:"80px"}})],1),0===t.giftType?e("div",[e("div",{staticClass:"caption-bold mt-2"},[t._v(t._s(t.$$t("won"))),e("span",{staticClass:"caption red-text"},[t._v(t._s(t.gift_0&&t.gift_0.money))]),t._v(t._s(t.$$t("won_1")))]),e("div",{staticClass:"caption-bold mt-2"},[t._v(t._s(t.$$t("won_notes")))])]):1===t.giftType?e("div",[e("div",{staticClass:"caption-bold mt-1"},[t._v(t._s(t.$$t("won"))+" "),e("span",{staticClass:"caption red-text"},[t._v(t._s(t.gift_1&&t.gift_1.giftText))])]),e("div",{staticClass:"caption-bold mt-1"},[t._v(t._s(t.$$t("codes"))+"ï¼š "),e("span",{staticClass:"caption red-text"},[t._v(t._s(t.gift_1&&t.gift_1.giftObjId))]),t._v(" "),e("span",{staticClass:"caption ml-3",on:{click:function(i){return t.copyBtnClick(t.gift_1&&t.gift_1.giftObjId)}}},[t._v(t._s(t.$t("common.copy")))])]),e("div",{staticClass:"caption-bold mt-1"},[t._v(t._s(t.$$t("kf")))])]):e("div",{staticClass:"caption-bold mt-11"},[t._v(" "+t._s(t.$$t("regrets"))+" ")]),1===t.giftType?e("div",{staticClass:"gift_btn",on:{click:t.onReceiveGift}},[e("van-button",{staticClass:"radius-1",attrs:{size:"small",color:"linear-gradient(to bottom, #ffec96, #ffb01b)"}},[t._v(" "+t._s(t.$$t("btn"))+" ")])],1):t._e()]),e("div",{staticStyle:{"margin-top":"44px"}},[e("van-image",{attrs:{src:"/images/turntable/close.png",width:"36px",height:"36px"},on:{click:function(i){t.showPopup=!1}}})],1)])],1)}),[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"view-background"},[i("div",{staticClass:"view-background-flex"},[i("div",{staticClass:"view-background-flex-top"}),i("div",{staticClass:"view-background-flex-bottom"})])])}],!1,null,"83fa9434",null);i.default=n.exports},eb91:function(t,i,e){}}]);