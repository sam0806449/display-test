(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-096c0c33"],{ae59:function(t,e,s){"use strict";s.r(e);s("99af"),s("fb6a"),s("b0c0"),s("a9e3");var i={name:"FinancialBuy",mixins:[s("c28f").a],data:function(){return{title:"",isHot:!1,again:!0,money:1,minimumPurchaseAmount:0,productId:"",payPassWord:"",showKeyboard:!1,showPwdKeyboard:!1,showPopup:!1,checked:!1,isShow:1}},watch:{money:function(t,e){if(/^[1-9](\d{0,8})(\.(\d{0,2}))?$/g.test(t))this.money=t;else{if(""==t)return void(this.money="");this.money=e}}},created:function(){this.productId=this.$route.query.productId,this.title=this.$route.query.title,this.isHot=this.$route.query.isHot,this.again=this.$route.query.again,this.isShow=Number(this.$route.query.isShow),this.minimumPurchaseAmount=this.$route.query.minimumPurchaseAmount,this.money=this.$route.query.minimumPurchaseAmount||1,this.initMemberData()},methods:{showBuy:function(){if(!this.checked)return this.showPopup=!1,void this.$toast(this.$$t("checkToast"));Number(this.money)<Number(this.minimumPurchaseAmount)?this.$toast(this.$$t("minDesc")+this.minimumPurchaseAmount):Number(this.money)>Number(this.memberData.balance)?this.$toast(this.$$t("insufficient")):(this.payPassWord="",this.showPopup=!0,this.showPwdKeyboard=!0)},submitBuy:function(){var t=this;if(this.payPassWord.length<4)return this.showPopup=!1,void this.$toast(this.$$t("pwdToast"));this.$post("/api/Financial/BuyIn?productId=".concat(this.productId,"&money=").concat(this.money,"&payPassWord=").concat(this.payPassWord)).then((function(e){return t.checkResp(e,(function(t){return!0===t.data.success}))})).then((function(){t.showPopup=!1,t.initMemberData(),2===t.isShow?t.$router.push("/app/financial/hold"):t.$router.back(),t.$success(t.$$t("buySuccess"))})).catch((function(e){t.showPopup=!1,t.procError(e)}))},closeMoney:function(){this.money=1},setMoney:function(t){this.money=t},hideShowMoneyKeyboard:function(){this.showKeyboard=!1,this.showBuy()},onInput:function(t){this.payPassWord=(this.payPassWord+t).slice(0,4)},onDelete:function(){this.payPassWord=this.payPassWord.slice(0,this.payPassWord.length-1)},closePopup:function(){this.showPopup=!1,this.showPwdKeyboard=!1,this.payPassWord=""},$$t:function(t){return this.$t("financialBuy."+t)}},beforeRouteLeave:function(t,e,s){this.isHot?("financialMarketDetails"===t.name&&s("/app/financial"),sessionStorage.removeItem("productId"),s()):this.again?("financialMarketDetails"===t.name&&s("/app/financialHold/details"),s()):s()}},o=(s("c4301"),s("2877")),n=Object(o.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"financialBuy"}},[t._m(0),s("scroller",[s("div",{staticClass:"warp"},[s("div",{staticClass:"financialBuy-title"},[s("div",[t._v(t._s(t.title))])]),s("div",{staticClass:"financialBuy-money"},[s("div",{staticClass:"title"},[t._v(t._s(t.$$t("money")))]),s("div",{staticClass:"center"},[s("van-field",{attrs:{type:"digit",center:"","right-icon":"images/financial/close.png",readonly:""},on:{"click-right-icon":function(e){return e.stopPropagation(),t.closeMoney(e)},"click-input":function(e){e.stopPropagation(),t.showKeyboard=!0}},model:{value:t.money,callback:function(e){t.money=e},expression:"money"}},[s("span",{staticClass:"currencySymbol",attrs:{slot:"left-icon"},slot:"left-icon"},[t._v(t._s(t.currencySymbol))]),s("div",{staticClass:"subtitle-2",attrs:{slot:"right-icon"},slot:"right-icon"},[t._v(t._s(t.currencyDenomination))])])],1),s("div",{staticClass:"tags"},[s("van-tag",{attrs:{color:"#FDECE8","text-color":"#FD723F",size:"large"},on:{click:function(e){return t.setMoney(1e3)}}},[t._v(" "+t._s(t.currencySymbol)+"1000"+t._s(t.currencyDenomination)+" ")]),s("van-tag",{attrs:{color:"#FDECE8","text-color":"#FD723F",size:"large"},on:{click:function(e){return t.setMoney(2e3)}}},[t._v(" "+t._s(t.currencySymbol)+"2000"+t._s(t.currencyDenomination)+" ")]),s("van-tag",{attrs:{color:"#FDECE8","text-color":"#FD723F",size:"large"},on:{click:function(e){return t.setMoney(5e3)}}},[t._v(" "+t._s(t.currencySymbol)+"5000"+t._s(t.currencyDenomination)+" ")])],1),s("van-divider",{staticStyle:{margin:"0"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:Number(t.memberData&&t.memberData.balance)<Number(t.minimumPurchaseAmount),expression:"Number(memberData && memberData.balance) < Number(minimumPurchaseAmount)"}],staticClass:"desc"},[t._v(" "+t._s(t.$$t("moneyDesc1"))),s("span",[t._v(t._s(t.$$t("moneyDesc2")))])])],1),s("div",{staticClass:"financialBuy-after"},[2===t.isShow?s("div",[s("div",{staticClass:"title"},[t._v(t._s(t.$$t("expiration")))]),s("div",{staticClass:"desc"},[t._v(" "+t._s(t.$$t("expirationDesc1"))),s("span",[t._v(t._s(t.$$t("expirationDesc2")))]),t._v("ï¼Œ"+t._s(t.$$t("expirationDesc3"))),s("span",[t._v(t._s(t.$$t("expirationDesc4")))])]),s("van-divider",{staticStyle:{margin:"0",padding:"0"}})],1):t._e(),s("van-cell",{attrs:{title:t.$$t("payment"),"is-link":"",value:""+t.$$t("balance")+t.currencySymbol+(t.memberData&&t.memberData.balance)+t.currencyDenomination,size:"large"}})],1),s("div",{staticClass:"financialBuy-check"},[s("van-checkbox",{attrs:{"checked-color":"rgb(70, 132, 255)"},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v(" "+t._s(t.$$t("checkDesc"))+" ")])],1),s("div",{staticClass:"financialBuy-btn"},[s("van-button",{attrs:{hairline:"",block:"",color:"linear-gradient(to right, rgb(154, 187, 255), rgb(70, 132, 255))"},on:{click:t.hideShowMoneyKeyboard}},[t._v(t._s(t.$$t("determine"))+" ")])],1)])]),s("van-number-keyboard",{attrs:{show:t.showKeyboard,maxlength:10,"close-button-text":t.$t("common.complete"),"hide-on-click-outside":!1,theme:"custom"},on:{close:t.hideShowMoneyKeyboard,blur:function(e){t.showKeyboard=!1}},model:{value:t.money,callback:function(e){t.money=e},expression:"money"}}),s("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:t.showPopup,callback:function(e){t.showPopup=e},expression:"showPopup"}},[s("div",{staticClass:"title"},[s("div",[t._v(t._s(t.$$t("pwdDesc")))]),s("div",{staticClass:"icon"},[s("van-icon",{attrs:{name:"cross",size:"20"},on:{click:t.closePopup}})],1)]),s("div",{staticClass:"title-2"},[t._v(t._s(t.$$t("actually")))]),s("div",{staticClass:"center align-items-center"},[s("span",{staticClass:"money-number"},[t._v(t._s(t.currencySymbol))]),s("div",{staticClass:"text"},[t._v(t._s(t.money)+t._s(t.currencyDenomination))])]),s("van-password-input",{attrs:{value:t.payPassWord,length:4,gutter:8,focused:t.showPopup},on:{focus:function(e){t.showPwdKeyboard=!0}}})],1),s("van-number-keyboard",{attrs:{show:t.showPwdKeyboard,"z-index":"3006",theme:"custom","close-button-text":t.$t("common.complete"),"hide-on-click-outside":!1},on:{input:t.onInput,delete:t.onDelete,blur:function(e){t.showPwdKeyboard=!1},close:t.submitBuy}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"view-background"},[e("div",{staticClass:"view-background-flex"},[e("div",{staticClass:"view-background-flex-top"}),e("div",{staticClass:"view-background-flex-bottom"})])])}],!1,null,"a484ea94",null);e.default=n.exports},c4301:function(t,e,s){"use strict";s("e161")},e161:function(t,e,s){}}]);