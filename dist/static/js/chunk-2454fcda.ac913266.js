(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2454fcda"],{"786e":function(e,t,n){"use strict";n("d6f8")},d6f8:function(e,t,n){},ff58:function(e,t,n){"use strict";n.r(t);n("99af"),n("4de4"),n("7db0"),n("4160"),n("d81d"),n("fb6a"),n("a434"),n("a9e3"),n("d3b7"),n("ac1f"),n("6062"),n("3ca3"),n("1276"),n("2ca0"),n("159b"),n("ddb0");var r=n("2909"),a={name:"Recharge",components:{Zfb:function(){return n.e("chunk-6feeb34c").then(n.bind(null,"2d68"))},Yh:function(){return n.e("chunk-53a8d0ba").then(n.bind(null,"e444"))}},data:function(){return{showChangeMoney:!1,isShowRandomNums:!1,changeMoneyData:{},type:"general",index:0,amount:100,aisleItems:[],isShowRechargeAisle:"scan",recharges:[],rechargeXnhb:[],rechargeXnhbItem:{},xnhbCurrencyCodes:[],xnhb:"",protocolId:"",isShowSheet:!1,title:null,remarkText:"",rechargeType:null,rechargeItem:null,amountarr:[100,500,1e3,2e3,5e3,1e4],amountarr_th:[500,1e3,2e3,5e3,1e4,2e4],xnhNumber:100,requireDiscount:!0}},computed:{protocols:function(){var e=this;return this.rechargeXnhb.filter((function(t){return t.currencyCode===e.xnhb}))||[]},isShowProtocols:function(){for(var e=!1,t=0;t<this.protocols.length;t++)if(this.protocols[t].payChannelName){e=!0;break}return e},exchangeRate:function(){var e=this;if(0!==this.rechargeXnhb.length){var t=this.rechargeXnhb.filter((function(t){return t.objId===e.protocolId}))[0].exchangeRate;return Number(t)}},payChanneItem:function(){var e=this;return this.rechargeXnhb.filter((function(t){return t.objId===e.protocolId}))[0]},getMoney:function(){var e=Math.floor(100*Number(this.xnhNumber*this.exchangeRate))/100;return"k"===this.currencyDenomination?this.currencySymbol+Math.floor(e/1e3*100)/100+this.currencyDenomination:this.currencySymbol+e},asyncNums:function(){if(this.rechargeItem){var e=this.rechargeItem.minMoneyY||(this.rechargeItem.maxMoneyY?1:100),t=this.rechargeItem.maxMoneyY?Math.floor(this.rechargeItem.maxMoneyY):1e4;if(0===this.rechargeItem.minMoneyY&&0===this.rechargeItem.maxMoneyY)return[100,200,300,400,500,1e3,2e3,3e3,5e3,1e4];"9"==="".concat(t).slice(-1)&&(t+=1);var n=0,a=1,s=!1;if(Math.floor(t/10)>e){if("".concat(t).startsWith("9")){var o="".concat(t).length;t="1";for(var i=0;i<o;i++)t+=0;t=+t}for(var c="".concat(Math.floor(t/10)).length,h="1",u=1;u<c;u++)h+="0";n=Math.floor(t/10/h)*h}else if(Math.floor(t/10*2)>e){for(var l="".concat(Math.floor(t/10)).length,m="1",y=1;y<l;y++)m+="0";n=Math.floor(t/10/m)*m,a=2}else{for(var g="".concat(Math.floor((t-e)/9)).length,p="1",f=1;f<g;f++)p+="0";n=Math.floor((t-e)/9/p)*p,s=!0}for(var d=[e],v=a;v<8+a;v++)s?d.push(Math.floor(e)+n*v):d.push(n*v);return d.push(this.rechargeItem.maxMoneyY||1e4),Object(r.a)(new Set(d))}return[100,200,300,400,500,1e3,2e3,3e3,5e3,1e4]},xnhbarr:function(){return this.asyncNums}},watch:{protocols:function(e){this.protocolId=e[0].objId},type:function(e){this.remarkText="xnhb"===e?this.rechargeXnhbItem.remark:""}},mounted:function(){this.onLoadPaymentChannel(),"THB"===this.memberInfo.currencyCode&&(this.amountarr=this.amountarr_th,this.amount=500)},methods:{onLoadPaymentChannel:function(){var e=this;this.$post("/api/Deposit/GetPaymentChannel").then((function(t){return e.checkResp(t,(function(e){return!0===e.data.success}))})).then((function(t){var n=t.data;e.recharges=n.filter((function(e){return"xnhb"!==e.groupType}));var r=n.filter((function(e){return"xnhb"===e.groupType}));if(r.length>0){e.rechargeXnhbItem=r[0],e.rechargeXnhb=r[0].merchantChannels[0].channels,e.xnhb=e.rechargeXnhb[0].currencyCode;var a=e.rechargeXnhb.map((function(e){return{currencyCode:e.currencyCode,currencyName:e.currencyName,payChannelName:e.payChannelName}}));e.xnhbCurrencyCodes=e.uniqueCurrencyCode(a)}})).catch((function(t){e.procError(t)}))},onlineDeposit:function(){var e=this;this.showProgress(),this.$post("/api/Deposit/OnlineDeposit?payCode=".concat(this.rechargeItem.payCode,"&merChannelId=").concat(this.rechargeItem.objId,"&money=").concat(this.amount,"&requireDiscount=").concat(this.requireDiscount)).then((function(t){return e.checkResp(t,(function(e){return!0===e.data.success}))})).then((function(t){e.showProgress(!1);var n=t.data;1===n.hrefType||2===n.hrefType?(sessionStorage.setItem("payUrl",n.payUrl),e.$router.push("recharge/transferQrCode")):3===n.hrefType?window.location.href=n.payUrl:(sessionStorage.setItem("payUrl",n.payUrl),e.$router.push("recharge/hrefForm"))})).catch((function(t){e.showProgress(!1),e.procError(t)}))},showSheet:function(e){var t=this;this.isShowSheet=!this.isShowSheet,this.title=e.groupName,this.rechargeType=e.groupType,this.remarkText=e.remark,this.aisleItems=e.merchantChannels,this.$nextTick((function(){"yhzh"===e.groupType?t.$refs.yhzh.radio=0:t.$refs.scan.radio=0}))},goXnhb:function(){if(Number(this.xnhNumber)<1)this.$toast(this.$$t("toast_1"));else{var e=Math.floor(100*Number(this.xnhNumber*this.exchangeRate))/100;"k"===this.currencyDenomination&&(e=Math.floor(e/1e3*100)/100),this.$router.push({path:"recharge/virtual",query:{amount:Number(this.xnhNumber),payAmount:e}}),this.$sessionSet("recharge-item",this.payChanneItem)}},confirmChangeMoney:function(){this.clear(),this.goRecharge()},cancelChangeMoney:function(){this.amount=100,this.clear()},clear:function(){this.showChangeMoney=!1,this.changeMoneyData={}},nextShowRandomNums:function(){this.isShowSheet=!1,this.isShowRandomNums=!0},goRecharge:function(){var e=JSON.parse(sessionStorage.getItem("recharge-item"));if(e){if(this.amount<e.minMoneyY)return this.$toast(this.$$t("_3")),this.showChangeMoney=!0,void(this.changeMoneyData=e);if("tranbank"===e.serviceType){if(this.amount<=0)return void this.$toast(this.$$t("toast_2"));this.$router.push({path:"recharge/transferBank",query:{amount:this.amount}})}else"transcan"===e.serviceType?this.$router.push({path:"recharge/transferScanCode",query:{amount:this.amount}}):this.onMoneyType(e)}else this.$toast(this.$$t("toast_3"))},onMoneyType:function(e){var t=this,n="";if("2"===e.moneyType){var r=(Math.floor(90*Math.random())+10)/100;this.amount+=r,n=this.$$t("m_center_1",{money:this.amount})}else{if("3"!==e.moneyType)return"4"===e.moneyType&&Math.floor(this.amount)!==Number(this.amount)?void this.$info(this.$$t("m_center_3")):void this.onlineDeposit();for(var a=e.moneyValue.split(","),s=0;s<a.length;s++)if(Number(a[s])>=Number(this.amount)){this.amount=Number(a[s]);break}Number(this.amount)>Number(a[a.length-1])&&(this.amount=Number(a[a.length-1])),n=this.$$t("m_center_2",{moneyValue:e.moneyValue,money:this.amount})}this.$dialog.confirm({title:this.$t("common.point"),message:n}).then((function(){t.onlineDeposit()})).catch((function(){t.amount=100}))},getType:function(e){return"hot"===e.tag?"danger":"warning"},changeXnhb:function(e){this.xnhb=e.currencyCode;var t=this.protocols[0];this.rechargeItem=t,this.xnhNumber=this.asyncNums[0]},changePayChanne:function(e){this.protocolId=e.objId},activeItem:function(e){this.rechargeItem=e,sessionStorage.setItem("recharge-item",JSON.stringify(e))},closeSheet:function(){sessionStorage.removeItem("recharge-item"),this.rechargeItem=null,"yhzh"===this.rechargeType?this.$refs.yhzh.radio=null:this.$refs.scan.radio=null},uniqueCurrencyCode:function(e){for(var t=0;t<e.length;t++)for(var n=t+1;n<e.length;n++)e[t].currencyCode===e[n].currencyCode&&(e.splice(n,1),n--);return e},InputValue:function(e){var t=this;this.amount=Number(e),this.amountarr.forEach((function(e,n){t.amount===e&&(t.index=n)}))},setType:function(e){var t=this;if("xnhb"===e){var n=this.protocols.find((function(e){return e.objId===t.protocolId}));if(this.xnhbCurrencyCodes.length<1||!n)return void this.$info(this.$$t("notOPen"));this.rechargeItem=n,this.xnhNumber=this.asyncNums[0]}this.type=e},switchProtocols:function(e){this.protocolId=e;var t=this.protocols.find((function(t){return t.objId===e}));this.rechargeItem=t,this.xnhNumber=this.asyncNums[0]},$$t:function(e,t){return this.$t("recharge."+e,t)}}},s=(n("786e"),n("2877")),o=Object(s.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"recharge"}},[n("div",{staticClass:"my-3 px-3"},[n("van-row",{attrs:{gutter:"16",type:"flex",justify:"space-between"}},[n("van-col",{attrs:{span:"12"}},[n("van-button",{staticClass:"radius-1",attrs:{color:"general"===e.type?"linear-gradient(to right, rgb(117, 162, 255), rgb(70, 132, 255))":null,block:""},on:{click:function(t){return e.setType("general")}}},[e._v(" "+e._s(e.$$t("btn_1"))+" ")])],1),n("van-col",{attrs:{span:"12"}},[e.skgCode!==e.skyLotteryCode?n("van-button",{staticClass:"radius-1",attrs:{color:"xnhb"===e.type?"linear-gradient(to right, rgb(117, 162, 255), rgb(70, 132, 255))":null,block:""},on:{click:function(t){return e.setType("xnhb")}}},[e._v(" "+e._s(e.$$t("btn_2"))+" ")]):e._e()],1)],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"general"===e.type,expression:"type==='general'"}]},[n("div",{staticClass:"recharge-t"},[n("p",[n("span"),e._v(" "+e._s(e.$$t("rechargeTitle"))+" ")]),n("van-field",{attrs:{placeholder:e.$$t("amountDesc"),clearable:"",type:"number"},on:{input:e.InputValue},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}},[n("div",{attrs:{slot:"left-icon"},slot:"left-icon"},[e._v(e._s(e.currencySymbol))]),e.currencyDenomination?n("div",{attrs:{slot:"right-icon"},slot:"right-icon"},[e._v(e._s(e.currencyDenomination))]):e._e()]),n("ul",{staticStyle:{"justify-content":"space-between"}},e._l(e.amountarr,(function(t,r){return n("li",{key:r,class:{active:e.index===r&&e.amount===t},on:{click:function(n){e.index=r,e.amount=t}}},[e._v(e._s(t)+" ")])})),0)],1),n("div",{staticClass:"recharge-b px-4"},[n("p",[n("span"),e._v(" "+e._s(e.$$t("rechargeType"))+" ")]),n("div",{staticClass:"recharge-content radius-2"},[n("div",{staticClass:"recharge-warps radius-2 "},[n("scroller",[n("div",{staticClass:"px-4"},e._l(e.recharges,(function(t,r){return n("van-cell",{key:r,attrs:{center:"",size:"large","is-link":""},on:{click:function(n){return e.showSheet(t)}},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",[e._v(e._s(t.groupName))])]},proxy:!0},{key:"icon",fn:function(){return["SGU3"===e.skgCodeKey&&"yl"===t.groupType?n("van-icon",{attrs:{name:"/images/SGU3/yl.png",size:"32"}}):n("van-icon",{attrs:{name:"/payImages/group/"+t.groupType+".png",size:"32"}})]},proxy:!0},{key:"default",fn:function(){return[n("van-tag",{attrs:{slot:"default",type:e.getType(t)},slot:"default"},[e._v(e._s(t.tagDesc))])]},proxy:!0}],null,!0)})})),1)])],1)])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:"xnhb"===e.type,expression:"type==='xnhb'"}],staticClass:"xnhb"},[n("scroller",[n("div",{staticClass:"pb-4"},[e.remarkText?n("van-notice-bar",{attrs:{scrollable:"",text:e.remarkText,"left-icon":"images/recharge/invalid-name.png",background:"#fff",color:"#333"}}):e._e(),n("div",{staticClass:"xnhb-top background-white px-4 pt-3 pb-4"},[n("div",{staticClass:"subtitle-3"},[e._v(e._s(e.$$t("currency")))]),n("div",{staticClass:"items"},[e._l(e.xnhbCurrencyCodes,(function(t,r){return[n("div",{key:r,staticClass:"px-4 py-2 radius-2 item",class:{item_active:t.currencyCode===e.xnhb},on:{click:function(n){return e.changeXnhb(t)}}},[e._v(" "+e._s(t.currencyName)+" ")])]}))],2),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowProtocols,expression:"isShowProtocols"}]},[n("div",{staticClass:"subtitle-3 mt-3"},[e._v(e._s(e.$$t("protocol")))]),n("div",{staticClass:"items mt-3"},[e._l(e.protocols,(function(t,r){return[n("div",{key:r,staticClass:"px-5 py-2 radius-2 item",class:{item_active:t.objId===e.protocolId},on:{click:function(n){return e.switchProtocols(t.objId)}}},[n("div",[e._v(e._s(t.payChannelName)+" ")])])]}))],2)])]),n("div",{staticClass:"xnhb-b background-white px-4 pt-3 pb-4 mt-3"},[n("div",{staticClass:"subtitle-3"},[e._v(e._s(e.$$t("number"))+" "),n("span",{staticClass:"caption text-grey"},[e._v(e._s(e.$$t("exchangeRate"))+"（1≈"+e._s(e.currencySymbol)+e._s(e.exchangeRate)+"）")])]),n("div",{staticClass:"items mt-3"},[e._l(e.asyncNums,(function(t,r){return[n("div",{key:r,staticClass:"radius-2 num-item",class:{item_active:Number(e.xnhNumber)===t},on:{click:function(n){e.xnhNumber=t}}},[e._v(" "+e._s(t)+" ")])]}))],2),n("van-field",{attrs:{placeholder:e.$$t("number_desc"),clearable:"",type:"number"},model:{value:e.xnhNumber,callback:function(t){e.xnhNumber=t},expression:"xnhNumber"}})],1),n("div",{staticClass:"px-10 background-white text-grey pb-7 body-2"},[e._v(e._s(e.$$t("pay"))+"："),n("span",{staticClass:"main-text"},[e._v(e._s(e.getMoney))]),e._v("（"+e._s(e.$$t("pay_1"))+"：1≈"+e._s(e.currencySymbol)+e._s(e.exchangeRate)+"）"+e._s(e.$$t("pay_2"))+" ")]),n("div",{staticClass:"px-4 mt-6"},[n("van-button",{staticClass:"radius-2",attrs:{color:"linear-gradient(to right, rgb(129, 170, 255), rgb(70, 132, 255))",block:""},on:{click:e.goXnhb}},[e._v(" "+e._s(e.$$t("submit"))+" ")])],1)],1)])],1),n("van-action-sheet",{attrs:{title:e.title,"close-icon":""},model:{value:e.isShowSheet,callback:function(t){e.isShowSheet=t},expression:"isShowSheet"}},[n("van-notice-bar",{class:{"notice-yh":"yhzh"!==e.rechargeType},attrs:{scrollable:"",text:e.remarkText,"left-icon":"images/recharge/invalid-name.png",background:"#fff",color:"#333"}}),n("div",{staticClass:"recharge-aisle"},[n("Yh",{directives:[{name:"show",rawName:"v-show",value:"yhzh"===e.rechargeType,expression:"(rechargeType === 'yhzh')"}],ref:"yhzh",attrs:{items:e.aisleItems},on:{"update:items":function(t){e.aisleItems=t},activeItem:e.activeItem}}),n("Zfb",{directives:[{name:"show",rawName:"v-show",value:"yhzh"!==e.rechargeType,expression:"rechargeType !== 'yhzh'"}],ref:"scan",attrs:{items:e.aisleItems},on:{"update:items":function(t){e.aisleItems=t},activeItem:e.activeItem}})],1),n("button",{on:{click:e.nextShowRandomNums}},[e._v(e._s(e.$$t("next")))])],1),n("van-action-sheet",{attrs:{title:e.title,"close-icon":""},on:{closed:e.closeSheet},model:{value:e.isShowRandomNums,callback:function(t){e.isShowRandomNums=t},expression:"isShowRandomNums"}},[n("div",{staticClass:"recharge-t randomNums-pop"},[e.rechargeItem?n("h6",[e._v(e._s(e.rechargeItem.payChannelName))]):e._e(),e.rechargeItem?n("p",{staticClass:"van-ellipsis mb-3"},[e._v(" "+e._s(e.$t("aisleZFB.moneyDesc1"))+e._s(e.getMoneyText(e.rechargeItem.minMoneyY))+"，"+e._s(e.$t("aisleZFB.moneyDesc2"))+e._s(e.getMoneyText(e.rechargeItem.maxMoneyY))+" ")]):e._e(),["SGDP"].includes(e.skgCodeKey)?e._e():n("div",[n("p",[n("span"),e._v(" "+e._s(e.$$t("rechargeTitle"))+" ")]),n("van-field",{attrs:{placeholder:e.$$t("amountDesc"),clearable:"",type:"number"},on:{input:e.InputValue},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}},[n("div",{attrs:{slot:"left-icon"},slot:"left-icon"},[e._v(e._s(e.currencySymbol))]),e.currencyDenomination?n("div",{attrs:{slot:"right-icon"},slot:"right-icon"},[e._v(e._s(e.currencyDenomination))]):e._e()]),n("ul",e._l(e.asyncNums,(function(t,r){return n("li",{key:r,class:{active:e.amount===t},on:{click:function(n){e.amount=t}}},[e._v(" "+e._s(e.currencySymbol)+e._s(t)+e._s(e.currencyDenomination)+" ")])})),0)],1),["tranbank","transcan"].includes(e.rechargeItem&&e.rechargeItem.serviceType)?e._e():n("div",{staticClass:"transfer-information",staticStyle:{"margin-top":"20px"}},[n("van-radio-group",{model:{value:e.requireDiscount,callback:function(t){e.requireDiscount=t},expression:"requireDiscount"}},[n("van-radio",{staticStyle:{"margin-bottom":"10px"},attrs:{name:!0},scopedSlots:e._u([{key:"icon",fn:function(t){return[n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("img",{staticStyle:{width:"18px"},attrs:{slot:"icon",src:t.checked?"images/recharge/active-single.png":"images/recharge/single.png"},slot:"icon"}),n("span",{staticStyle:{"margin-left":"5px","font-size":"14px"}},[e._v(e._s(e.$t("recharge._1")))])])]}}],null,!1,3843389420)}),n("van-radio",{attrs:{name:!1},scopedSlots:e._u([{key:"icon",fn:function(t){return[n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("img",{staticStyle:{width:"18px"},attrs:{slot:"icon",src:t.checked?"images/recharge/active-single.png":"images/recharge/single.png"},slot:"icon"}),n("span",{staticStyle:{"margin-left":"5px","font-size":"14px"}},[e._v(e._s(e.$t("recharge._2")))])])]}}],null,!1,2021267919)})],1)],1)]),n("button",{on:{click:e.goRecharge}},[e._v(e._s(e.$$t("next")))])]),n("van-dialog",{attrs:{title:e.$$t("rechargeTitle"),"show-cancel-button":""},on:{confirm:e.confirmChangeMoney,cancel:e.cancelChangeMoney},model:{value:e.showChangeMoney,callback:function(t){e.showChangeMoney=t},expression:"showChangeMoney"}},[n("div",{staticClass:"recharge-t"},[n("p",{staticClass:"van-ellipsis"},[e._v(" "+e._s(e.$t("aisleZFB.moneyDesc1"))+e._s(e.getMoneyText(e.changeMoneyData.minMoneyY))+"，"+e._s(e.$t("aisleZFB.moneyDesc2"))+e._s(e.getMoneyText(e.changeMoneyData.maxMoneyY))+" ")]),n("van-field",{attrs:{placeholder:e.$$t("amountDesc"),clearable:"",type:"number"},on:{input:e.InputValue},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}},[n("div",{attrs:{slot:"left-icon"},slot:"left-icon"},[e._v(e._s(e.currencySymbol))]),e.currencyDenomination?n("div",{attrs:{slot:"right-icon"},slot:"right-icon"},[e._v(e._s(e.currencyDenomination))]):e._e()])],1)])],1)}),[],!1,null,null,null);t.default=o.exports}}]);