(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-258af889"],{5259:function(t,e,s){"use strict";s.r(e);s("99af"),s("4de4"),s("a9e3");var n=s("2909"),a=s("6a57"),i={name:"ChangeNotes",data:function(){return{date:1,dropdownTitle:this.$t("common.all"),items:[],refresh:!1,pageIndex:1,recordType:""}},computed:{startDate:function(){return 30===this.date?Object(a.d)(Object(a.c)(new Date,1),"yyyy-MM-dd"):7===this.date?Object(a.d)(Object(a.b)(new Date,7),"yyyy-MM-dd"):3===this.date?Object(a.d)(Object(a.b)(new Date,2),"yyyy-MM-dd"):2===this.date?Object(a.d)(Object(a.b)(new Date,1),"yyyy-MM-dd"):Object(a.d)(Object(a.b)(new Date,0),"yyyy-MM-dd")},typeOptions:function(){return this.skgCode===this.skgGameCode?[{text:this.$t("common.all"),value:""},{text:this.$$t("type_1"),value:1},{text:this.$$t("type_2"),value:2},{text:this.$$t("type_3"),value:3},{text:this.$$t("type_4"),value:4},{text:this.$$t("type_5"),value:5},{text:this.$$t("type_6"),value:6},{text:this.$$t("type_7"),value:7},{text:this.$$t("type_8"),value:8}]:[{text:this.$t("common.all"),value:""},{text:this.$$t("type_1"),value:1},{text:this.$$t("type_2"),value:2},{text:this.$$t("type_3"),value:3},{text:this.$$t("type_4"),value:4},{text:this.$$t("type_6"),value:6},{text:this.$$t("type_7"),value:7},{text:this.$$t("type_8"),value:8}]},dateOptions:function(){return[{text:this.$$t("nearlyAMonth"),value:30},{text:this.$$t("nearlySevenDays"),value:7},{text:this.$$t("nearlyTwoDays"),value:3},{text:this.$$t("yesterday"),value:2},{text:this.$$t("today"),value:1}]},endDate:function(){var t=Number(this.date);return 7===t||1===t||30===t?Object(a.d)(new Date,"yyyy-MM-dd"):Object(a.d)(Object(a.b)(new Date,Number(t-1)),"yyyy-MM-dd")}},watch:{date:function(){this.items=[],this.pageIndex=1,this.onRefresh()}},activated:function(){var t=this;this.dropdownTitle=this.typeOptions.filter((function(e){return e.value===t.recordType}))[0].text,this.onRefresh()},methods:{onLoad:function(t){var e=this,s="/api/Account/GetMoneyRecord?recordType=".concat(this.recordType,"&pageSize=10&pageIndex=").concat(this.pageIndex,"&startDate=").concat(this.startDate,"&endDate=").concat(this.endDate);this.showProgress(),this.$post(s).then((function(t){return e.checkResp(t,(function(t){return!0===t.data.success}))})).then((function(s){var a,i=s.data;(e.pageIndex=e.pageIndex+1,e.refresh)?(e.items=[],e.items=i.items,t&&(e.refresh=!1,t())):i.items.length>0?((a=e.items).push.apply(a,Object(n.a)(i.items)),t&&t(!1)):t&&t(!0);e.showProgress(!1)})).catch((function(s){t&&t(!0),e.showProgress(!1),e.procError(s)}))},onLoadMore:function(t){this.refresh=!1,this.onLoad(t)},onRefresh:function(t){this.refresh=!0,this.pageIndex=1,this.onLoad(t)},typeClick:function(t){this.dropdownTitle=t.text,this.recordType=t.value,this.pageIndex=1,this.items=[],this.onRefresh(),this.$refs.type.toggle()},goDetails:function(t){sessionStorage.setItem("Note-Data",JSON.stringify(t)),this.$router.push("changeNotes/details")},$$t:function(t){return this.$t("changeNotes."+t)}}},o=(s("730b"),s("2877")),r=Object(o.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"changeNotes"}},[s("van-dropdown-menu",{attrs:{"active-color":"rgb(70 132 255)"}},[s("van-dropdown-item",{ref:"type",attrs:{title:t.dropdownTitle}},[s("div",{staticClass:"dropdown-warp"},[s("div",{staticClass:"title"},[t._v(t._s(t.$$t("chooseType")))]),s("div",{staticClass:"btns"},t._l(t.typeOptions,(function(e,n){return s("div",{key:n,staticClass:"btn van-ellipsis",class:{active:t.recordType===e.value},on:{click:function(s){return t.typeClick(e)}}},[s("span",[t._v(t._s(e.text))])])})),0)])]),s("van-dropdown-item",{attrs:{options:t.dateOptions},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),s("div",{staticClass:"changeNotes-content"},[s("scroll-view",{attrs:{onRefresh:t.onRefresh,loadMore:t.onLoadMore}},[t.items.length>0?s("div",[t._l(t.items,(function(e,n){return[s("div",{key:n},[s("div",{staticClass:"changeNotes-list",on:{click:function(s){return t.goDetails(e)}}},[s("div",{staticClass:"changeNotes-list-t"},[s("div",[t._v(" "+t._s(e.recordTypeDesc)+" ")]),s("span",{class:{profit_win:Number(e.money)>0}},[t._v(t._s(e.currencySymbol)+t._s(e.money)+t._s(e.currencyDenomination))])]),s("div",{staticClass:"changeNotes-list-b"},[s("span",[t._v(t._s(e.createTime))]),s("span",[t._v(t._s(t.$$t("balance"))+"ï¼š"+t._s(e.currencySymbol)+t._s(e.afterBalance)+t._s(t.currencyDenomination))])])]),s("van-divider",{staticStyle:{margin:"0",padding:"0 16px","background-color":"white"}})],1)]}))],2):s("van-empty",{staticClass:"text-center",attrs:{description:t.$t("common.noMore")},scopedSlots:t._u([{key:"image",fn:function(){return[s("van-image",{attrs:{src:"/images/empty/no-more.png",width:"280",height:"130"}})]},proxy:!0}])})],1)],1)],1)}),[],!1,null,"0dc130e2",null);e.default=r.exports},"730b":function(t,e,s){"use strict";s("842e")},"842e":function(t,e,s){}}]);