(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3e5b54d7"],{"58ee":function(t,e,a){"use strict";a.r(e);var n=a("6a57"),i={name:"MemberInfo",data:function(){return{title:"",show:!1,fieldValue:"",url:"",showPicker:!1,showAvatar:!1,minDate:new Date(1975,0,1),maxDate:new Date(2025,10,1)}},methods:{changeUrl:function(t){this.show=!0,"nickName"===t&&(this.url="/api/Account/ModifiyMemNickName?nickName=",this.title=this.$$t("nickName"))},changeInfo:function(){var t=this;null!==this.fieldValue&&""!==this.fieldValue?this.$post(this.url+this.fieldValue).then((function(e){return t.checkResp(e,(function(t){return!0===t.data.success}))})).then((function(e){t.$toast(e.data),t.fieldValue=null,t.getMemberInfo()})).catch((function(e){t.fieldValue=null,t.procError(e)})):this.$toast(this.$t("common.noNull"))},changeBirthday:function(){this.url=" /api/Account/ModifiyMemBirthday?birthday=",this.showPicker=!0},confirmBirthday:function(t){this.fieldValue=Object(n.e)(new Date(t),"yyyy-MM-dd"),this.showPicker=!1,this.changeInfo()},getMemberInfo:function(){var t=this;this.$post("/api/Account/GetUserInfo").then((function(e){return t.checkResp(e,(function(t){return!0===t.data.success}))})).then((function(e){var a=e.data;t.$sessionSet("MemberInfo",a),t.$store.commit("setMemberInfo",a)})).catch((function(e){t.procError(e)}))},changeAvatar:function(){this.showAvatar=!0},setAvatar:function(t){var e=this,a="";a=t<10?"0"+t:t,this.$post("/api/Account/ModifiyMemAvatar?avatar="+a).then((function(t){return e.checkResp(t,(function(t){return!0===t.data.success}))})).then((function(t){e.getMemberInfo(),e.$toast(t.data),e.showAvatar=!1,e.$router.go(0)})).catch((function(t){e.procError(t)}))},onOversize:function(){this.$toast(this.$t("common.imgSizeDesc"))},$$t:function(t){return this.$t("memberInfo."+t)}}},r=(a("59fe"),a("2877")),c=Object(r.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"memberInfo"}},[a("EasyRefresh",{attrs:{userSelect:!1,bouncing:!1}},[a("van-cell-group",{staticClass:"memberDetails-top"},[a("van-cell",{staticClass:"avatar",attrs:{title:t.$$t("avatar"),size:"large",center:"","is-link":""},on:{click:t.changeAvatar}},[a("van-image",{attrs:{slot:"default",round:"",width:"46",height:"46",src:t.getAvatar(Number(t.memberData&&t.memberData.avatar))},slot:"default",scopedSlots:t._u([{key:"loading",fn:function(){return[a("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0}])})],1),a("van-cell",{attrs:{title:t.$$t("memberAccount"),value:t.memberInfo&&t.memberInfo.memberAccount,size:"large",readonly:""}}),a("van-cell",{attrs:{title:t.$$t("level"),value:t.memberInfo&&t.memberInfo.vipLevelName,size:"large",readonly:""}}),a("van-cell",{attrs:{title:t.$$t("nickName"),value:t.memberInfo&&t.memberInfo.nickName||t.$t("common.unSet"),size:"large","is-link":""},on:{click:function(e){return t.changeUrl("nickName")}}}),a("van-cell",{attrs:{title:t.$$t("birthday"),value:t.memberInfo&&t.memberInfo.birthday||t.$t("common.unSet"),size:"large","is-link":"",readonly:""},on:{click:t.changeBirthday}}),a("van-cell",{attrs:{title:t.$$t("details"),size:"large","is-link":""},on:{click:function(e){return t.redirectRouter("details")}}})],1),a("van-cell-group",{staticClass:"memberDetails-bt"},[a("van-cell",{attrs:{title:t.$$t("setPwd"),size:"large","is-link":""},on:{click:function(e){return t.redirectRouter("/app/setPwd")}}})],1),a("van-cell-group",{staticClass:"mt-3"},[a("van-cell",{attrs:{title:t.$$t("Withdrawal"),size:"large","is-link":""},on:{click:function(e){return t.redirectRouter("/app/cards")}}})],1)],1),a("van-dialog",{attrs:{title:t.title,"show-cancel-button":""},on:{confirm:t.changeInfo},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("van-cell-group",[a("van-field",{attrs:{placeholder:t.$$t("fieldValueDesc")},model:{value:t.fieldValue,callback:function(e){t.fieldValue=e},expression:"fieldValue"}})],1)],1),a("van-popup",{attrs:{position:"bottom"},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[a("van-datetime-picker",{attrs:{type:"date","min-date":t.minDate,"max-date":t.maxDate},on:{cancel:function(e){t.showPicker=!1},confirm:t.confirmBirthday}})],1),a("van-action-sheet",{attrs:{"cancel-text":t.$$t("cancel"),"close-on-click-action":"",title:t.$$t("changeAvatar")},on:{cancel:function(e){t.showAvatar=!1}},model:{value:t.showAvatar,callback:function(e){t.showAvatar=e},expression:"showAvatar"}},[a("div",{staticClass:"content px-7 pb-4 pt-5"},[a("van-row",{attrs:{gutter:"24"}},[t._l(8,(function(e){return[a("van-col",{key:e,staticClass:"mb-7",attrs:{span:"6"},on:{click:function(a){return t.setAvatar(e)}}},[a("van-image",{class:{avatar_active:Number(t.memberInfo&&t.memberInfo.avatar)===e},attrs:{width:"1.6rem",height:"1.6rem",src:"/images/member/avatars/"+e+".png"}})],1)]}))],2)],1)])],1)}),[],!1,null,"4369962e",null);e.default=c.exports},"59fe":function(t,e,a){"use strict";a("b677")},b677:function(t,e,a){}}]);