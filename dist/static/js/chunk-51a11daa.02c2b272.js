(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-51a11daa"],{"631d":function(t,e,a){"use strict";a.r(e);a("a9e3"),a("b680"),a("ac1f"),a("466d");var s=a("6a57"),n={name:"Bets",mixins:[a("c28f").a],data:function(){return{match:{},leagues:[],league:0,dropdownTitle:"",tab:1,oddss:[],betMoney:0,showBetPopup:!1,moneyArrs:[10,50,100],betMatchItem:{},handlingFee:null}},created:function(){var t=this.$sessionGet("math-data");this.dropdownTitle=t.leagueName,this.match=t,this.onMatchItem(t),this.onLoadLeagues(t.leagueId),this.ongetHandlingFee()},computed:{expectedMoney:function(){return this.betMoney<1?0:(Number(this.betMoney)*(1+this.betMatchItem.odds/100)).toFixed(2)},handlingFeeMoney:function(){if(Number(this.betMoney)<1)return 0;var t=Number(this.betMoney)*(this.betMatchItem.odds/100)*(Number(this.handlingFee)/100);return this.currencySymbol+t.toFixed(2)+this.currencyDenomination}},watch:{tab:function(){var t=this.match;this.onMatchItem(t)}},methods:{onLoadLeagues:function(t){var e=this;this.$post("/api/Match/Match",{pageIndex:1,pageSize:20,leagueId:t}).then((function(t){return e.checkResp(t,(function(t){return!0===t.data.success}))})).then((function(t){var a=t.data;e.leagues=a.items})).catch((function(t){e.procError(t)}))},onMatchItem:function(t){var e=this;this.showProgress(),this.$post("/api/Match/MatchItem",{matchId:t.matchId,isFirstHalf:2===Number(this.tab)}).then((function(t){return e.checkResp(t,(function(t){return!0===t.data.success}))})).then((function(t){e.oddss=t.data,e.$refs.countDown.reset(),e.showProgress(!1)})).catch((function(t){e.showProgress(!1),e.procError(t)}))},onBetClick:function(t){this.betMatchItem=t,this.showBetPopup=!0},onBet:function(){var t=this;Number(this.memberData.balance)<Number(this.betMoney)?this.$info(this.$$t("balance_t")):Number(this.betMoney)<1?this.$info(this.$$t("betMoney_t")):(this.showProgress(),this.$post("/api/Match/Bet",{betMoney:this.betMoney,matchItemObjId:this.betMatchItem.matchItemObjId}).then((function(e){return t.checkResp(e,(function(t){return!0===t.data.success}))})).then((function(){t.showProgress(!1),t.betMoney=0,t.betMatchItem={},t.showBetPopup=!1,t.initMemberData(),t.$success(t.$$t("betSuccess"))})).catch((function(e){t.showProgress(!1),t.procError(e)})))},ongetHandlingFee:function(){var t=this;this.$get("/api/Match/HandlingFee").then((function(e){return t.checkResp(e,(function(t){return!0===t.data.success}))})).then((function(e){t.handlingFee=e.data,t.showProgress(!1)})).catch((function(e){t.showProgress(!1),t.procError(e)}))},changeLeague:function(t){this.match=t,this.onMatchItem(t),this.$refs.dropdownItem.toggle()},setBetMoney:function(t){this.betMoney=t||Math.floor(Number(this.memberData.balance))},formatDateUcs:function(t){if(t&&"undefined"!==t&&"null"!==t)return this.isAndroid()?Object(s.e)(new Date(t),"MM-dd hh:mm"):Object(s.e)(Object(s.i)(t),"MM/dd hh:mm")},onClickLeft:function(){this.redirectRouter(this.skgCode===this.skgUcsCode?"/app/tournaments":"/app/ucs")},onClickRight:function(){this.redirectRouter(this.skgCode===this.skgUcsCode?"/app/tournamentsNotes":"/app/ucsNotes")},$$t:function(t,e){return this.$t("bets."+t,e)}},beforeRouteLeave:function(t,e,a){sessionStorage.removeItem("math-data"),a()},beforeRouteEnter:function(t,e,a){sessionStorage.getItem("math-data")?a():a("/app/ucs")}},i=(a("738f"),a("2877")),c=Object(i.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"bets"}},[a("van-nav-bar",{attrs:{"left-arrow":""},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight},scopedSlots:t._u([{key:"title",fn:function(){return[a("van-dropdown-menu",{attrs:{"active-color":"black"}},[a("van-dropdown-item",{ref:"dropdownItem",attrs:{title:t.dropdownTitle},model:{value:t.league,callback:function(e){t.league=e},expression:"league"}},[a("div",{staticClass:"dropdownItem_warp",staticStyle:{"background-color":"rgb(245, 245, 249)","z-index":"3"}},[a("scroller",[t.leagues.length>0?a("div",{staticClass:"pa-3"},[t._l(t.leagues,(function(e,s){return[a("div",{key:s,staticClass:"background-white pa-2 radius-1 mb-2 caption",on:{click:function(a){return t.changeLeague(e)}}},[a("van-row",{attrs:{type:"flex",justify:"space-between",align:"center",gutter:"10"}},[a("van-col",{staticClass:"text-left text-grey_1",attrs:{span:"6"}},[t._v(" "+t._s(t.formatDateUcs(e.startTime))+"(UTC-5) ")]),a("van-col",{staticClass:"text-center text-grey_1 caption-bold van-ellipsis",attrs:{span:"12"}},[t._v(" "+t._s(e.leagueName)+" ")]),a("van-col",{staticClass:"text-right",attrs:{span:"6"}},[a("span",{staticClass:"text-grey_1 caption-bold"},[t._v(t._s(t.$$t("volume")))]),a("span",{staticStyle:{color:"rgb(241, 153, 74)"}},[t._v(" "+t._s(e.fullTimeVolume))])])],1),a("div",{staticClass:"mt-4"},[a("van-row",{attrs:{type:"flex",justify:"space-between",align:"center",gutter:"10"}},[a("van-col",{staticClass:"text-center teamName",attrs:{span:"10"}},[a("van-image",{attrs:{src:e.homeTeamLogo||"/images/ucs/match.png",width:"38"}}),a("div",{staticClass:"mt-1"},[t._v(t._s(e.homeTeamName))])],1),a("van-col",{staticClass:"text-center",attrs:{span:"4"}},[a("van-image",{attrs:{src:"/images/ucs/vs.png",width:"31",height:"22"}})],1),a("van-col",{staticClass:"text-center teamName",attrs:{span:"10"}},[a("van-image",{attrs:{src:e.awayTeamLogo||"/images/ucs/match.png",width:"38"}}),a("div",{staticClass:"mt-1"},[t._v(t._s(e.awayTeamName))])],1)],1)],1)],1)]}))],2):a("van-empty",{staticClass:"text-center",attrs:{description:t.$t("common.noMore")},scopedSlots:t._u([{key:"image",fn:function(){return[a("van-image",{attrs:{src:"images/empty/no-more.png",width:"280",height:"130"}})]},proxy:!0}])})],1)],1)])],1)]},proxy:!0},{key:"right",fn:function(){return[a("van-icon",{attrs:{name:"description",size:"20"}})]},proxy:!0}])}),a("div",{staticClass:"pa-3"},[a("div",{staticClass:"background-white pa-2 radius-1"},[a("van-row",{attrs:{type:"flex",justify:"space-between",align:"center",gutter:"10"}},[a("van-col",{staticClass:"text-left text-grey_1",attrs:{span:"6"}},[t._v(" "+t._s(t.formatDateUcs(t.match&&t.match.startTime))+"(UTC-5) ")]),a("van-col",{staticClass:"text-center text-grey_1 caption-bold",attrs:{span:"12"}},[t._v(" "+t._s(t.match&&t.match.leagueName)+" ")]),a("van-col",{staticClass:"text-right",attrs:{span:"6"}},[a("span",{staticClass:"text-grey_1 caption-bold"},[t._v(t._s(t.$$t("volume")))]),a("span",{staticStyle:{color:"rgb(241, 153, 74)"}},[t._v(" "+t._s(t.match&&t.match.fullTimeVolume))])])],1),a("div",{staticClass:"mt-4"},[a("van-row",{attrs:{type:"flex",justify:"space-between",align:"center",gutter:"10"}},[a("van-col",{staticClass:"text-center teamName",attrs:{span:"10"}},[a("van-image",{attrs:{src:t.match.homeTeamLogo||"/images/ucs/match.png",width:"38"}}),a("div",{staticClass:"mt-1 van-ellipsis"},[t._v(t._s(t.match.homeTeamName))])],1),a("van-col",{staticClass:"text-center",attrs:{span:"4"}},[a("van-image",{attrs:{src:"/images/ucs/vs.png",width:"31",height:"22"}})],1),a("van-col",{staticClass:"text-center teamName",attrs:{span:"10"}},[a("van-image",{attrs:{src:t.match.awayTeamLogo||"/images/ucs/match.png",width:"38"}}),a("div",{staticClass:"mt-1 van-ellipsis"},[t._v(t._s(t.match.awayTeamName))])],1)],1)],1)],1)]),a("van-count-down",{ref:"countDown",staticClass:"px-4 text-right",attrs:{time:6e4},on:{finish:function(e){return t.onMatchItem(t.match)}},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"timeData_block radius-1"},[t._v(t._s(e.minutes))]),a("span",{staticClass:"timeData_colon"},[t._v(":")]),a("span",{staticClass:"timeData_block radius-1"},[t._v(t._s(e.seconds))])]}}])}),a("van-tabs",{staticClass:"subtitle-3",attrs:{background:"rgb(245, 245, 249)",color:"rgb(64, 128, 255)","title-active-color":"#7e838f","title-inactive-color":"#7e838f"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("van-tab",{attrs:{title:t.$$t("full"),name:"1"}}),a("van-tab",{attrs:{title:t.$$t("half"),name:"2"}})],1),a("div",{staticClass:"odds_items"},[a("scroller",[t.oddss.length>0?a("div",{staticClass:"px-3 pb-3"},[t._l(t.oddss,(function(e,s){return[a("van-row",{key:s,staticClass:"py-4 background-white radius-1 mb-2",attrs:{type:"flex",justify:"space-between",align:"center"}},[a("van-col",{attrs:{span:"6"}},[a("div",{staticClass:"subtitle-1 ucs-text"},[t._v(t._s(e.score))])]),a("van-col",{attrs:{span:"6"}},[a("div",{staticClass:"subtitle-1 ucs-text"},[t._v(t._s(e.odds)+"%")])]),a("van-col",{attrs:{span:"6"}},[a("div",{staticClass:"subtitle-1 ucs-text"},[t._v(t._s(e.volume))])]),a("van-col",{attrs:{span:"6"}},[a("van-button",{attrs:{round:"",type:"info",size:"mini"},on:{click:function(a){return t.onBetClick(e)}}},[a("span",{staticClass:"px-2"},[t._v(t._s(t.$$t("bet")))])])],1)],1)]}))],2):a("van-empty",{staticClass:"text-center",attrs:{description:t.$t("common.noMore")},scopedSlots:t._u([{key:"image",fn:function(){return[a("van-image",{attrs:{src:"images/empty/no-more.png",width:"280",height:"130"}})]},proxy:!0}])})],1)],1),a("van-popup",{staticClass:"betPopup",attrs:{position:"bottom",round:""},model:{value:t.showBetPopup,callback:function(e){t.showBetPopup=e},expression:"showBetPopup"}},[a("div",{staticClass:"pt-3 mb-10"},[a("div",{staticClass:"mb-4 px-3"},[a("div",{staticClass:"subtitle-1"},[t._v(" "+t._s(t.$$t("balance"))+"："+t._s(t.currencySymbol)+t._s(t.memberData&&t.memberData.balance)+t._s(t.currencyDenomination)+" ")]),a("div",{staticClass:"macth_info radius-2 pt-2 pb-4 mt-2 white-text"},[a("div",{staticClass:"subtitle-5"},[t._v(t._s(1===Number(t.tab)?t.$$t("full"):t.$$t("half"))+" "+t._s(t.betMatchItem&&t.betMatchItem.score)+" ")]),a("div",{staticClass:"caption mt-1"},[t._v(t._s(t.betMatchItem&&t.betMatchItem.leagueName))]),a("van-row",{staticClass:"mt-3 px-2",attrs:{align:"center"}},[a("van-col",{attrs:{span:"10"}},[a("div",{staticClass:"subtitle-1"},[t._v(t._s(t.betMatchItem&&t.betMatchItem.homeTeamName))])]),a("van-col",{attrs:{span:"4"}},[a("van-image",{attrs:{src:"images/ucs/vs_match.png",width:"31",height:"22"}})],1),a("van-col",{attrs:{span:"10"}},[a("div",{staticClass:"subtitle-1"},[t._v(t._s(t.betMatchItem&&t.betMatchItem.awayTeamName))])])],1)],1)]),a("div",{staticClass:"divider_match"}),a("van-row",{staticClass:"mt-3",attrs:{align:"center"}},[a("van-col",{attrs:{span:"8"}},[a("div",{staticClass:"caption ucs-text"},[t._v(t._s(t.$$t("money")))])]),a("van-col",{attrs:{span:"8"}},[a("div",{staticClass:"caption ucs-text"},[t._v(t._s(t.$$t("odds")))])]),a("van-col",{attrs:{span:"8"}},[a("div",{staticClass:"caption ucs-text"},[t._v(t._s(t.$$t("handlingFee")))])])],1),a("van-row",{staticClass:"mt-3",attrs:{align:"center"}},[a("van-col",{attrs:{span:"8"}},[a("div",{},[a("van-field",{staticClass:"betMoney_input",attrs:{maxlength:"8",type:"digit"},model:{value:t.betMoney,callback:function(e){t.betMoney=e},expression:"betMoney"}})],1)]),a("van-col",{attrs:{span:"8"}},[a("div",{staticClass:"subtitle-1 ucs-text"},[t._v("X"+t._s(t.betMatchItem&&t.betMatchItem.odds)+"%")])]),a("van-col",{attrs:{span:"8"}},[a("div",{staticClass:"subtitle-1 ucs-text"},[t._v(t._s(t.handlingFee)+"%")])])],1),a("van-row",{staticClass:"mt-3",attrs:{gutter:"4",type:"flex",justify:"center",align:"center"}},[t._l(t.moneyArrs,(function(e){return[a("van-col",{key:e},[a("van-button",{attrs:{size:"mini",plain:"",hairline:"",type:"info"},on:{click:function(a){return t.setBetMoney(e)}}},[a("span",{staticClass:"px-6 ucs-text"},[t._v(t._s(e))])])],1)]})),a("van-col",[a("van-button",{attrs:{size:"mini",plain:"",hairline:"",type:"info"},on:{click:function(e){return t.setBetMoney(null)}}},[a("span",{staticClass:"px-6 ucs-text"},[t._v(t._s(t.$t("common.all")))])])],1)],2),a("van-divider",{staticClass:"ma-0 mt-3",style:{color:"#7e838f",borderColor:"#7e838f",padding:"0 16px"}}),a("van-row",{staticClass:"mt-3 px-4 subtitle-1",attrs:{align:"center"}},[a("van-col",{attrs:{span:"12"}},[a("div",{staticClass:"text-left",staticStyle:{color:"#f1994a"}},[t._v(" "+t._s(t.$$t("expectedMoney"))+"："+t._s(t.currencySymbol)+t._s(t.expectedMoney)+t._s(t.currencyDenomination)+" ")])]),a("van-col",{attrs:{span:"12"}},[a("div",{staticClass:"subtitle-1 ucs-text text-right"},[t._v(" "+t._s(t.$$t("handlingFee"))+"："+t._s(t.handlingFeeMoney)+" ")])])],1),a("div",{staticClass:"px-4 mt-6"},[a("van-button",{attrs:{color:"linear-gradient(to right, rgb(129, 170, 255), rgb(70, 132, 255))",block:"",round:""},on:{click:t.onBet}},[a("span",{staticClass:"subtitle-5"},[t._v(t._s(t.$$t("onBet")))])])],1)],1)])],1)}),[],!1,null,"6c144396",null);e.default=c.exports},"738f":function(t,e,a){"use strict";a("dcfc")},dcfc:function(t,e,a){}}]);