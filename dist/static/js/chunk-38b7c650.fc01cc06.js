(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-38b7c650"],{"2f6f":function(t,e,a){},"61a4":function(t,e,a){"use strict";a("2f6f")},e136:function(t,e,a){"use strict";a.r(e);a("99af"),a("4de4"),a("d81d"),a("a434"),a("a9e3");var s=a("2909"),n=a("6a57"),o={name:"GameBet",data:function(){return{platform:"",date:1,openPlatforms:[],items:[],refresh:!1,pageIndex:1,dropdownTitle:"",totalData:{}}},computed:{startDate:function(){return 30===this.date?Object(n.d)(Object(n.c)(new Date,1),"yyyy-MM-dd"):7===this.date?Object(n.d)(Object(n.b)(new Date,7),"yyyy-MM-dd"):3===this.date?Object(n.d)(Object(n.b)(new Date,2),"yyyy-MM-dd"):2===this.date?Object(n.d)(Object(n.b)(new Date,1),"yyyy-MM-dd"):Object(n.d)(Object(n.b)(new Date,0),"yyyy-MM-dd")},dateOptions:function(){return[{text:this.$$t("nearlySevenDays"),value:7},{text:this.$$t("nearlyTwoDays"),value:3},{text:this.$$t("yesterday"),value:2},{text:this.$$t("today"),value:1}]},endDate:function(){return 7===this.date||1===this.date?Object(n.d)(new Date,"yyyy-MM-dd"):Object(n.d)(Object(n.b)(new Date,Number(this.date-1)),"yyyy-MM-dd")},dateText:function(){var t=this;return this.dateOptions.filter((function(e){return e.value===Number(t.date)}))[0].text}},watch:{platform:function(){this.pageIndex=1,this.items=[],this.onRefresh()},date:function(){this.items=[],this.pageIndex=1,this.onRefresh()}},created:function(){this.GetOpenPlatforms()},methods:{GetOpenPlatforms:function(){var t=this;this.$get("/api/Game/GetOpenPlatforms").then((function(e){return t.checkResp(e,(function(t){return!0===t.data.success}))})).then((function(e){var a=e.data;t.skgCode===t.skyLotteryCode?t.openPlatforms.push({value:"SGLottery",text:t.$$t("SGLottery")}):(t.openPlatforms=a.map((function(t){return{text:t.platformName,value:t.platformCode}})),t.openPlatforms.splice(0,0,{value:"",text:t.$$t("all")}),t.skgCode===t.skgGameCode?(t.openPlatforms.splice(1,0,{value:"SGLottery",text:t.$$t("SGLottery")}),t.openPlatforms.splice(2,0,{value:"SGUcs",text:t.$$t("SGUcs")})):t.openPlatforms.splice(1,0,{value:"SGUcs",text:t.$$t("SGUcs")})),t.dropdownTitle=t.openPlatforms[0].text,t.platform=t.openPlatforms[0].value,t.refresh=!0,t.pageIndex=1,t.onQueryGameOrder()})).catch((function(e){t.procError(e)}))},onQueryGameOrder:function(t){var e=this;this.showProgress(),this.$get("/api/Game/QueryGameOrder?platformCode=".concat(this.platform,"&pageSize=20&pageIndex=").concat(this.pageIndex,"&startDate=").concat(this.startDate,"&endDate=").concat(this.endDate)).then((function(t){return e.checkResp(t,(function(t){return!0===t.data.success}))})).then((function(a){var n,o=a.data;(e.pageIndex=e.pageIndex+1,e.refresh)?(e.items=[],e.items=o.items,e.totalData=o.totalData,t&&(e.refresh=!1,t())):o.items.length>0?((n=e.items).push.apply(n,Object(s.a)(o.items)),e.totalData=o.totalData,t&&t(!1)):t&&t(!0);e.showProgress(!1)})).catch((function(a){t&&t(!0),e.showProgress(!1),e.procError(a)}))},onLoadMore:function(t){this.refresh=!1,this.onQueryGameOrder(t)},onRefresh:function(t){this.refresh=!0,this.pageIndex=1,this.onQueryGameOrder(t)},typeClick:function(t){this.dropdownTitle=t.text,this.platform=t.value,this.$refs.type.toggle()},goDetails:function(t){this.$sessionSet("game-item",t),this.$router.push("gamebet/details")},getMText:function(t){return this.currencySymbol+t+this.currencyDenomination},$$t:function(t){return this.$t("gameBet."+t)}}},r=(a("61a4"),a("2877")),i=Object(r.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"gamebet"}},[a("van-dropdown-menu",{attrs:{"active-color":"rgb(0 145 255)"}},[a("van-dropdown-item",{ref:"type",attrs:{title:t.dropdownTitle}},[a("div",{staticClass:"dropdown-warp"},[a("div",{staticClass:"btns"},t._l(t.openPlatforms,(function(e,s){return a("div",{key:s,staticClass:"btn",class:{active:t.platform===e.value},on:{click:function(a){return t.typeClick(e)}}},[a("span",[t._v(t._s(e.text))])])})),0)])]),a("van-dropdown-item",{attrs:{options:t.dateOptions},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),a("div",{staticClass:"gamebet-content"},[a("scroll-view",{attrs:{onRefresh:t.onRefresh,loadMore:t.onLoadMore}},[t.items.length>0?a("div",{staticClass:"py-2 px-4"},t._l(t.items,(function(e,s){return a("div",{key:s,staticClass:"gamebet-list",on:{click:function(a){return t.goDetails(e)}}},[a("div",{staticClass:"gamebet-list-t flex"},[a("div",{staticClass:"text-left flex"},[a("div",{staticClass:"subtitle-1"},[t._v(t._s(e.gameName)+" "),a("span",{staticClass:"caption"},[t._v("（"+t._s(e.platformName)+"）")])])]),a("div",{staticClass:"text-right"},[t._v(t._s(e.orderTime))])]),a("div",{staticClass:"gamebet-list-b flex space-between align-items-center mt-1"},[a("div",[t._v(t._s(t.$$t("betAmount"))+"："+t._s(e.currencySymbol)+t._s(e.betMoneyY)+t._s(t.currencyDenomination))]),a("div",{class:{profit_win:Number(e.profitMoneyY)>0}},[t._v(t._s(t.$$t("profit"))+"："+t._s(e.currencySymbol)+t._s(e.profitMoneyY)+t._s(t.currencyDenomination))])])])})),0):a("van-empty",{staticClass:"text-center",attrs:{description:t.$t("common.noMore")},scopedSlots:t._u([{key:"image",fn:function(){return[a("van-image",{attrs:{src:"/images/empty/no-more.png",width:"280",height:"130"}})]},proxy:!0}])})],1)],1),a("div",{staticClass:"totalData px-4 py-3 background-white text-left text-grey_1"},[a("van-row",{attrs:{type:"flex",justify:"space-between"}},[a("van-col",{attrs:{span:"12"}},[t._v(" "+t._s(t.$$t("total"))+": "),a("span",{staticClass:"text-black body-2"},[t._v("("+t._s(t.dateText)+")")])]),a("van-col",{staticClass:"text-right",attrs:{span:"12"}},[t._v(" "+t._s(t.$$t("betMoneyY"))+"："),a("span",{staticClass:"text-black subtitle-1"},[t._v(t._s(t.getMText(t.totalData&&t.totalData.betMoneyY)))])])],1),a("van-row",{staticClass:"mt-3",attrs:{type:"flex",justify:"space-between"}},[a("van-col",{attrs:{span:"12"}},[t._v(" "+t._s(t.$$t("realBetMoneyY"))+": "),a("span",{staticClass:"text-black subtitle-1"},[t._v(t._s(t.getMText(t.totalData&&t.totalData.realBetMoneyY)))])]),a("van-col",{staticClass:"text-right",attrs:{span:"12"}},[t._v(" "+t._s(t.$$t("profitMoneyY"))+"： "),a("span",{staticClass:"red-text subtitle-1"},[t._v(t._s(t.getMText(t.totalData&&t.totalData.profitMoneyY)))])])],1)],1)],1)}),[],!1,null,null,null);e.default=i.exports}}]);