(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-62d55171"],{4352:function(t,a,e){},4412:function(t,a,e){"use strict";e("4352")},"77a4":function(t,a,e){"use strict";e.r(a);e("99af"),e("4de4"),e("fb6a"),e("a9e3"),e("d3b7"),e("25f0");var n={name:"Withdraw",mixins:[e("c28f").a],data:function(){return{withdrawInfo:null,money:"1",counterFee:0,drawPass:"",showKeyboard:!1,showPwdKeyboard:!1,showPopup:!1,cards:[],type:"bank",radio:"",exchangeRate:0,virtualName:""}},created:function(){this.onLoadWithdrawInfo()},computed:{cardItems:function(){return"bank"===this.type?this.cards.filter((function(t){return 0===t.currencyType})):this.cards.filter((function(t){return 1===t.currencyType}))},getVirtualMoney:function(){return 0===this.exchangeRate||1===this.exchangeRate?this.money:"k"===this.currencyDenomination?Number(1e3*this.money/this.exchangeRate):Number(this.money/this.exchangeRate)}},watch:{money:function(t,a){var e=0;if(/^[1-9](\d{0,8})(\.(\d{0,2}))?$/g.test(t))this.money=t,e=t;else{if(""===t)return void(this.money="");this.money=a,e=a}this.calculateCounterFee(e)}},methods:{onLoadWithdrawInfo:function(){var t=this;this.$post("/api/Withdraw/GetWithdrawMoneyShowInfo").then((function(a){return t.checkResp(a,(function(t){return!0===t.data.success}))})).then((function(a){t.withdrawInfo=a.data,t.onLoadCard()})).catch((function(a){t.procError(a)}))},onLoadCard:function(){var t=this;this.$post("/api/Account/GetMemberBankCard").then((function(a){return t.checkResp(a,(function(t){return!0===t.data.success}))})).then((function(a){t.cards=a.data;var e="bank"===t.type?0:1,n=t.cards.filter((function(t){return t.currencyType===e}))[0];n?(t.radio=n.objId,t.exchangeRate=n.exchangeRate,t.virtualName=n.bankName):t.changeType("virtual")})).catch((function(a){t.procError(a)}))},calculateCounterFee:function(t){var a=this;this.$post("/api/Withdraw/CalculateCounterFee?money="+t).then((function(t){return a.checkResp(t,(function(t){return!0===t.data.success}))})).then((function(t){a.counterFee=t.data})).catch((function(t){a.procError(t)}))},showWithdraw:function(){var t=this;Number(this.money)<Number(this.withdrawInfo&&this.withdrawInfo.minWithdrawMoney)?this.$toast(this.$$t("minMoneyDesc")):Number(this.money)>Number(this.withdrawInfo&&this.withdrawInfo.maxWithdrawMoney)&&0!==Number(this.withdrawInfo&&this.withdrawInfo.maxWithdrawMoney)?this.$toast(this.$$t("maxMoneyDesc")):Number(this.money)+Number(this.counterFee)>Number(this.withdrawInfo.balance)?this.$toast(this.$$t("balanceDesc")):this.withdrawInfo.withdrawalAccountObjId&&(this.withdrawInfo.memberAppendDeposit>0?this.$dialog.confirm({title:this.$t("common.point"),message:"".concat(this.$$t("_1")," ").concat(this.currencySymbol).concat(this.withdrawInfo.memberAppendDeposit).concat(this.currencyDenomination,"，").concat(this.$$t("_2")," ").concat(this.currencySymbol).concat(this.withdrawInfo.balance).concat(this.currencyDenomination,"，").concat(this.$$t("_3")," ").concat(this.currencySymbol).concat(this.withdrawInfo.balance).concat(this.currencyDenomination)}).then((function(){t.drawPass="",t.showPopup=!0,t.showPwdKeyboard=!0})).catch((function(){})):(this.drawPass="",this.showPopup=!0,this.showPwdKeyboard=!0))},submitWithdraw:function(){var t=this;this.drawPass.length<4?this.$toast(this.$$t("pwdToast")):this.$post("/api/Withdraw/SubmitWithdrawMoney?withdrawPass=".concat(this.drawPass.toString(),"&money=").concat(this.money,"&counterFee=").concat(this.counterFee,"&withdrawalAccountObjId=").concat(this.withdrawInfo.withdrawalAccountObjId)).then((function(a){return t.checkResp(a,(function(t){return!0===t.data.success}))})).then((function(a){t.$toast(a.data),t.showKeyboard=!1,t.showPopup=!1,t.money="1",t.initMemberData(),t.onLoadWithdrawInfo()})).catch((function(a){t.showKeyboard=!1,t.showPopup=!1,t.procError(a)}))},hideShowMoneyKeyboard:function(){this.showKeyboard=!1,this.showWithdraw()},onInput:function(t){this.drawPass=(this.drawPass+t).slice(0,4)},onDelete:function(){this.drawPass=this.drawPass.slice(0,this.drawPass.length-1)},closePopup:function(){this.showPopup=!1,this.showPwdKeyboard=!1,this.drawPass=""},changeRadio:function(t){this.radio=t.objId,this.withdrawInfo.withdrawalAccountObjId=t.objId,this.withdrawInfo.bankName=t.bankName,this.withdrawInfo.bankCardNO=t.bankCardNumber,this.exchangeRate=t.exchangeRate,this.virtualName=t.bankName},changeType:function(t){var a=this;if(this.type=t,0===this.cardItems.length&&"virtual"===t)return this.type="bank",void this.$dialog.confirm({title:this.$t("common.point"),message:this.$$t("addVirtual")}).then((function(){a.$router.push("virtual/add")})).catch((function(){}));var e=this.cardItems[0];this.radio=e.objId,this.withdrawInfo.withdrawalAccountObjId=e.objId,this.withdrawInfo.bankName=e.bankName,this.withdrawInfo.bankCardNO=e.bankCardNumber,this.exchangeRate=e.exchangeRate,this.virtualName=e.bankName},$$t:function(t){return this.$t("withdraw."+t)}}},i=(e("4412"),e("2877")),s=Object(i.a)(n,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"withdraw"}},[e("div",{staticClass:"my-3 px-3"},[e("van-row",{attrs:{gutter:"16",type:"flex",justify:"space-between"}},[e("van-col",{attrs:{span:"12"}},[e("van-button",{staticClass:"radius-1",attrs:{color:"bank"===t.type?"linear-gradient(to right, rgb(117, 162, 255), rgb(70, 132, 255))":null,block:""},on:{click:function(a){return t.changeType("bank")}}},[t._v(" "+t._s(t.$$t("btn_1"))+" ")])],1),e("van-col",{attrs:{span:"12"}},[t.skgCode!==t.skyLotteryCode?e("van-button",{staticClass:"radius-1",attrs:{color:"virtual"===t.type?"linear-gradient(to right, rgb(117, 162, 255), rgb(70, 132, 255))":null,block:""},on:{click:function(a){return t.changeType("virtual")}}},[t._v(" "+t._s(t.$$t("btn_2"))+" ")]):t._e()],1)],1)],1),e("div",{staticClass:"withdraw-warp"},[e("div",{directives:[{name:"show",rawName:"v-show",value:"bank"===t.type,expression:"type==='bank'"}],staticClass:"bank"},[e("scroller",[e("div",{staticClass:"pb-3"},[e("div",{staticClass:"background-white bank-warp"},[e("div",{staticClass:"flex space-between px-4 py-2"},[e("div",{staticClass:"subtitle-3"},[t._v(t._s(t.$$t("amount")))]),0===Number(t.withdrawInfo&&t.withdrawInfo.minWithdrawMoney)&&0===Number(t.withdrawInfo&&t.withdrawInfo.maxWithdrawMoney)?e("div",{staticClass:"right"},[t._v(" "+t._s(t.$$t("unlimited"))+" ")]):e("div",{staticClass:"right"},[t._v("（"+t._s(t.$$t("moneyDesc"))+t._s(t.currencySymbol)+t._s(t.withdrawInfo&&t.withdrawInfo.minWithdrawMoney)+t._s(t.currencyDenomination)+"--"+t._s(t.currencySymbol)+t._s(t.withdrawInfo&&t.withdrawInfo.maxWithdrawMoney)+"）"+t._s(t.currencyDenomination)+" ")])]),e("div",{staticClass:"virtual-card"},[e("van-field",{attrs:{type:t.withdrawInfo&&t.withdrawInfo.isIntegerMoney?"digit":"number",readonly:""},nativeOn:{touchstart:function(a){a.stopPropagation(),t.showKeyboard=!0}},model:{value:t.money,callback:function(a){t.money=a},expression:"money"}},[e("span",{staticClass:"money-number",attrs:{slot:"left-icon"},slot:"left-icon"},[t._v(t._s(t.currencySymbol))]),e("div",{staticClass:"caption main-text",attrs:{slot:"right-icon"},slot:"right-icon"},[e("div",[t._v(t._s(t.currencyDenomination))]),e("div",{staticClass:"px-3",on:{click:function(a){t.money=t.withdrawInfo.balance.toString()}}},[t._v(t._s(t.$$t("all")))])])])],1),e("van-divider",{staticClass:"ma-0 px-4"}),e("div",{staticClass:"px-4 body-2 main-text mt-2"},[t._v(t._s(t.$$t("balance"))+t._s(t.currencySymbol)+t._s(t.withdrawInfo&&t.withdrawInfo.balance)+t._s(t.currencyDenomination)+" ")]),e("div",{staticClass:"mt-4"},[e("van-field",{staticClass:"v_main_color",attrs:{label:t.$$t("counterFee_c"),value:""+t.currencySymbol+t.counterFee+t.currencyDenomination,disabled:"","label-class":"label_title van-ellipsis"}}),e("van-field",{staticClass:"v_black",attrs:{label:t.$$t("arriveMoney"),value:""+t.currencySymbol+t.money+t.currencyDenomination,disabled:"","label-class":"label_title van-ellipsis"}}),e("van-field",{staticClass:"v_black",attrs:{label:t.$$t("_4"),value:""+t.currencySymbol+(t.withdrawInfo&&t.withdrawInfo.dml)+t.currencyDenomination,disabled:"","label-class":"label_title van-ellipsis"}})],1)],1),e("div",{staticClass:"background-white mt-3 pa-4"},[e("div",{staticClass:"subtitle-3 mb-4"},[t._v(t._s(t.$$t("banLists")))]),e("van-radio-group",{model:{value:t.radio,callback:function(a){t.radio=a},expression:"radio"}},[e("van-cell-group",{attrs:{border:!1}},[t._l(t.cardItems,(function(a,n){return[e("van-cell",{key:n,attrs:{clickable:""},on:{click:function(e){return t.changeRadio(a)}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[e("van-radio",{attrs:{name:a.objId}})]},proxy:!0},{key:"title",fn:function(){return[e("div",{staticClass:"subtitle-4"},[t._v(t._s(a.payeeName)+" "),e("span",{staticClass:"subtitle-1"},[t._v("（"+t._s(a.bankName)+"）")])]),e("div",{staticClass:"text-grey subtitle-1 mt-1"},[t._v(t._s(t.handleToSecretString(a.bankCardNumber)))])]},proxy:!0}],null,!0)})]}))],2)],1),e("van-divider",{staticClass:"ma-0"}),e("div",{staticClass:"main-text text-center subtitle-1 mt-4 pb-1",on:{click:function(a){return t.redirectRouter("bank/add")}}},[t._v(" + "+t._s(t.$$t("addBank"))+" ")])],1),e("div",{staticClass:"mt-5 px-4"},[e("van-button",{staticClass:"radius-2",attrs:{color:"linear-gradient(to right, rgb(129, 170, 255), rgb(70, 132, 255))",block:""},on:{click:t.showWithdraw}},[t._v(" "+t._s(t.$$t("btn"))+" ")])],1)])])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"virtual"===t.type,expression:"type==='virtual'"}],staticClass:"virtual"},[e("scroller",[e("div",{staticClass:"pb-3"},[e("div",{staticClass:"background-white virtual-warp"},[e("div",{staticClass:"subtitle-3 px-4 py-2"},[t._v(t._s(t.$$t("amount")))]),e("div",{staticClass:"virtual-card"},[e("van-field",{attrs:{type:t.withdrawInfo&&t.withdrawInfo.isIntegerMoney?"digit":"number",readonly:""},nativeOn:{touchstart:function(a){a.stopPropagation(),t.showKeyboard=!0}},model:{value:t.money,callback:function(a){t.money=a},expression:"money"}},[e("span",{staticClass:"money-number",attrs:{slot:"left-icon"},slot:"left-icon"},[t._v(t._s(t.currencySymbol))]),e("div",{staticClass:"caption main-text",attrs:{slot:"right-icon"},slot:"right-icon"},[e("div",[t._v(t._s(t.currencyDenomination))]),e("div",{staticClass:"px-3",on:{click:function(a){t.money=t.withdrawInfo.balance.toString()}}},[t._v(t._s(t.$$t("all")))])])])],1),e("van-divider",{staticClass:"ma-0 px-4"}),e("div",{staticClass:"px-4 body-2 main-text mt-2"},[t._v(t._s(t.$$t("balance"))+t._s(t.currencySymbol)+t._s(t.withdrawInfo&&t.withdrawInfo.balance)+t._s(t.currencyDenomination)+" ")]),e("div",{staticClass:"mt-4"},[e("van-field",{staticClass:"v_main_color",attrs:{label:t.$$t("counterFee_c"),value:""+t.currencySymbol+t.counterFee+t.currencyDenomination,disabled:"","label-class":"label_title van-ellipsis"}}),e("van-field",{staticClass:"v_main_color",attrs:{label:t.$$t("exchangeRate"),value:"1"+t.virtualName+"≈"+t.exchangeRate+(t.memberData&&t.memberData.currencyCode),disabled:"","label-class":"label_title van-ellipsis"}}),e("van-field",{staticClass:"v_black",attrs:{label:t.$$t("arrive")+"≈",value:""+t.getVirtualMoney+t.virtualName,disabled:"","label-class":"label_title"}}),e("van-field",{staticClass:"v_black",attrs:{label:t.$$t("_4"),value:""+t.currencySymbol+(t.withdrawInfo&&t.withdrawInfo.dml)+t.currencyDenomination,disabled:"","label-class":"label_title"}})],1)],1),e("div",{staticClass:"background-white mt-3 pa-4"},[e("div",{staticClass:"subtitle-3 mb-4"},[t._v(t._s(t.$$t("address_c")))]),e("van-radio-group",{model:{value:t.radio,callback:function(a){t.radio=a},expression:"radio"}},[e("van-cell-group",{attrs:{border:!1}},[t._l(t.cardItems,(function(a,n){return[e("van-cell",{key:n,attrs:{clickable:""},on:{click:function(e){return t.changeRadio(a)}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[e("van-radio",{attrs:{name:a.objId}})]},proxy:!0},{key:"title",fn:function(){return[e("div",{staticClass:"subtitle-4"},[t._v(t._s(a.payeeName)+" "),e("span",{staticClass:"subtitle-1"},[t._v("（"+t._s(a.bankName)+"）")])]),e("div",{staticClass:"text-grey subtitle-1 mt-1"},[t._v(t._s(t.handleToSecretString(a.bankCardNumber)))])]},proxy:!0}],null,!0)})]}))],2)],1),e("van-divider",{staticClass:"ma-0"}),e("div",{staticClass:"main-text text-center subtitle-1 mt-4 pb-1",on:{click:function(a){return t.redirectRouter("virtual/add")}}},[t._v(" + "+t._s(t.$$t("add"))+" ")])],1),e("div",{staticClass:"mt-5 px-4"},[e("van-button",{staticClass:"radius-2",attrs:{color:"linear-gradient(to right, rgb(129, 170, 255), rgb(70, 132, 255))",block:""},on:{click:t.showWithdraw}},[t._v(" "+t._s(t.$$t("btn"))+" ")])],1)])])],1)]),e("van-number-keyboard",{attrs:{show:t.showKeyboard,maxlength:10,"close-button-text":t.$t("common.complete"),"extra-key":t.withdrawInfo&&t.withdrawInfo.isIntegerMoney?"":".",theme:"custom"},on:{blur:t.hideShowMoneyKeyboard},model:{value:t.money,callback:function(a){t.money=a},expression:"money"}}),e("van-popup",{staticClass:"drawPass",attrs:{"close-on-click-overlay":!1},model:{value:t.showPopup,callback:function(a){t.showPopup=a},expression:"showPopup"}},[e("div",{staticClass:"title"},[e("div",[t._v(t._s(t.$$t("pwdDesc")))]),e("div",{staticClass:"icon"},[e("van-icon",{attrs:{name:"cross",size:"20"},on:{click:t.closePopup}})],1)]),e("div",{staticClass:"title-2"},[t._v(t._s(t.$$t("actually")))]),e("div",{staticClass:"center align-items-center"},[e("span",{staticClass:"money-number"},[t._v(t._s(t.currencySymbol))]),e("div",{staticClass:"text"},[t._v(t._s(t.money)+t._s(t.currencyDenomination))])]),e("van-divider",{staticStyle:{margin:"0",padding:"0 15px","margin-top":"11.5px"}}),e("div",{staticClass:"desc"},[e("div",{staticClass:"desc-title"},[t._v(t._s(t.$$t("counterFee")))]),e("div",{staticClass:"desc-number"},[t._v(t._s(t.currencySymbol)+t._s(t.counterFee)+t._s(t.currencyDenomination))])]),e("van-password-input",{attrs:{value:t.drawPass,length:4,gutter:8,focused:t.showPopup},on:{focus:function(a){t.showPwdKeyboard=!0}}})],1),e("van-number-keyboard",{attrs:{show:t.showPwdKeyboard,"z-index":"3006",theme:"custom","close-button-text":t.$t("common.complete"),"hide-on-click-outside":!1},on:{input:t.onInput,delete:t.onDelete,blur:function(a){t.showPwdKeyboard=!1},close:t.submitWithdraw}})],1)}),[],!1,null,"70143e51",null);a.default=s.exports}}]);