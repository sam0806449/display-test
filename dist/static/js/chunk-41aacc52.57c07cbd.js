(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-41aacc52"],{"0502":function(t,e,s){"use strict";s("46fa")},"46fa":function(t,e,s){},"6b89":function(t,e,s){"use strict";s.r(e);s("99af"),s("a9e3");var n=s("2909"),a=s("6a57"),i={name:"TurntableNotes",data:function(){return{recordType:"",dropdownTitle:"",dateDropdownTitle:"",date:0,refresh:!1,pageIndex:1,items:[]}},activated:function(){this.dropdownTitle=this.typeOptions[0].text,this.dateDropdownTitle=this.dateOptions[0].text,this.onRefresh()},computed:{startDate:function(){return 30===this.date?Object(a.d)(Object(a.c)(new Date,1),"yyyy-MM-dd"):Object(a.d)(Object(a.b)(new Date,this.date),"yyyy-MM-dd")},dateOptions:function(){return[{text:this.$$t("today"),value:0},{text:this.$$t("yesterday"),value:1},{text:this.$$t("nearlyTwoDays"),value:2},{text:this.$$t("nearlySevenDays"),value:7},{text:this.$$t("nearlyAMonth"),value:30}]},typeOptions:function(){return[{text:this.$t("common.all"),value:""},{text:this.$$t("status_0"),value:"0"},{text:this.$$t("status_1"),value:"1"},{text:this.$$t("status_2"),value:"2"},{text:this.$$t("status_3"),value:"-1"}]},endDate:function(){var t=Number(this.date);return 30===t||7===t||0===t?Object(a.d)(new Date,"yyyy-MM-dd"):Object(a.d)(Object(a.b)(new Date,Number(t)),"yyyy-MM-dd")}},methods:{onLoad:function(t){var e=this;this.showProgress(),this.$get("/api/Turntable/GetReceiveRecordList?status=".concat(this.recordType,"&pageIndex=").concat(this.pageIndex,"&pageSize=20&startDate=").concat(this.startDate,"&endDate=").concat(this.endDate)).then((function(t){return e.checkResp(t,(function(t){return!0===t.data.success}))})).then((function(s){var a,i=s.data;(e.pageIndex=e.pageIndex+1,e.refresh)?(e.items=[],e.items=i.items,t&&(e.refresh=!1,t())):i.items.length>0?((a=e.items).push.apply(a,Object(n.a)(i.items)),t&&t(!1)):t&&t(!0);e.showProgress(!1)})).catch((function(s){t&&t(!0),e.showProgress(!1),e.procError(s)}))},onLoadMore:function(t){this.refresh=!1,this.onLoad(t)},onRefresh:function(t){this.refresh=!0,this.pageIndex=1,this.onLoad(t)},timeClick:function(t){this.dateDropdownTitle=t.text,this.date=t.value,this.pageIndex=1,this.items=[],this.onRefresh(),this.$refs.date.toggle()},typeClick:function(t){this.dropdownTitle=t.text,this.recordType=t.value,this.pageIndex=1,this.items=[],this.onRefresh(),this.$refs.type.toggle()},onReceiveGift:function(t){var e=this;1===t.giftType?this.$get("/api/Turntable/ReceiveGift?objId=".concat(t.objId)).then((function(t){return e.checkResp(t,(function(t){return!0===t.data.success}))})).then((function(t){e.$info(t.data)})).catch((function(t){e.procError(t)})):this.$info(this.$$t("failed"))},getStatus:function(t){return 0===(t=Number(t))?this.$$t("status_0"):1===t?this.$$t("status_1"):2===t?this.$$t("status_2"):this.$$t("status_3")},$$t:function(t){return this.$t("turntableNotes."+t)}}},r=(s("0502"),s("2877")),o=Object(r.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"turntableNotes"}},[s("van-dropdown-menu",{attrs:{"active-color":"rgb(70 132 255)"}},[s("van-dropdown-item",{ref:"type",attrs:{title:t.dropdownTitle}},[s("div",{staticClass:"dropdown-warp"},[s("div",{staticClass:"btns"},t._l(t.typeOptions,(function(e,n){return s("div",{key:n,staticClass:"btn van-ellipsis",class:{active:t.recordType===e.value},on:{click:function(s){return t.typeClick(e)}}},[s("span",[t._v(t._s(e.text))])])})),0)])]),s("van-dropdown-item",{ref:"date",attrs:{title:t.dateDropdownTitle}},[s("div",{staticClass:"dropdown-warp"},[s("div",{staticClass:"btns"},t._l(t.dateOptions,(function(e,n){return s("div",{key:n,staticClass:"btn van-ellipsis",class:{active:t.date===e.value},on:{click:function(s){return t.timeClick(e)}}},[s("span",[t._v(t._s(e.text))])])})),0)])])],1),s("div",{staticClass:"turntableNotes_lists"},[s("scroll-view",{attrs:{onRefresh:t.onRefresh,loadMore:t.onLoadMore}},[t.items.length>0?s("div",{staticClass:"mt-3"},t._l(t.items,(function(e,n){return s("div",{key:n,staticClass:"note_List background-white van-hairline--bottom"},[s("div",{staticClass:"py-6 px-3 body-2"},[s("van-row",{attrs:{type:"flex",justify:"space-between",align:"center"}},[s("van-col",{staticClass:"text-left",attrs:{span:"6"}},[t._v(t._s(e.name||e.giftTypeDesc))]),s("van-col",{attrs:{span:"6"}},[t._v(t._s(e.createTime))]),s("van-col",{staticClass:"text-right",attrs:{span:"6"}},[0===Number(e.status)&&1===Number(e.giftType)?s("div",[s("van-button",{staticClass:"px-5 red-text",attrs:{color:"linear-gradient(to right, rgb(255, 236, 150), rgb(255, 176, 27))",size:"mini"},on:{click:function(s){return t.onReceiveGift(e)}}},[t._v("领取")])],1):s("div",{class:{"red-text":3===Number(e.status)}},[t._v(t._s(t.getStatus(e.status)))])]),s("van-col",{attrs:{span:"6"}},[s("van-image",{attrs:{src:"https://crane3.im6ge.com/"+e.pic,width:"60",height:"60"}})],1)],1)],1)])})),0):s("van-empty",{staticClass:"text-center",attrs:{description:t.$t("common.noMore")},scopedSlots:t._u([{key:"image",fn:function(){return[s("van-image",{attrs:{src:"/images/empty/no-more.png",width:"280",height:"130"}})]},proxy:!0}])})],1)],1)],1)}),[],!1,null,"f5fdfdd8",null);e.default=o.exports}}]);