(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-64e7d634"],{a6a7:function(t,e,a){"use strict";a.r(e);a("7db0"),a("4160"),a("c975"),a("a15b"),a("d81d"),a("a9e3"),a("d3b7"),a("820e"),a("3ca3"),a("159b"),a("ddb0");var s={name:"Purses",mixins:[a("c28f").a],data:function(){return{platforms:[],balance:{},gameBalance:0,refreshIcon:!1,errorMsg:[]}},computed:{navs:function(){return this.skgCode===this.skgGameCode?[{img:"zz",text:this.$$t("transfer"),link:"purses/transfer"},{img:"qk",text:this.$$t("withdraw"),link:"withdraw"},{img:"zhgl",text:this.$$t("cards"),link:"cards"}]:[{img:"qk",text:this.$$t("withdraw"),link:"withdraw"},{img:"zhgl",text:this.$$t("cards"),link:"cards"}]}},created:function(){this.skgCode===this.skgGameCode&&this.onGetOpenPlatforms()},activated:function(){this.initMemberData()},methods:{onLoad:function(t){var e=this;if(!this.isVirtualMember()&&!this.isDottedMember()){this.showProgress(),this.gameBalance=0;var a=function(a){e.$get("/api/Game/RefreshBalance?platformCode="+t[a].platformCode).then((function(t){return e.checkResp(t,(function(t){return!0===t.data.success}))})).then((function(s){var r=Number(s.data);e.showProgress(!1),e.balance[t[a].platformCode]=r,Number(r)>0&&(e.gameBalance=e.formatNum(e.gameBalance+r,2)),Number(a)===Number(t.length-1)&&setTimeout((function(){e.showProgress(!1)}),2e3)})).catch((function(t){e.showProgress(!1),e.procError(t)}))};for(var s in t)a(s)}},onTransformAll:function(){var t=this;if(!this.isVirtualMember()&&!this.isDottedMember()){this.showProgress(!0,1e4);var e=this.platforms;this.gameBalance=0,this.errorMsg=[];var a=e.map((function(e){return t.$get("/api/Game/TransformByPlatformCode?type=1&money=0&platformCode=".concat(e.platformCode))}));Promise.allSettled(a).then((function(a){a.forEach((function(a){if("fulfilled"===a.status){var s=a.value.config.url,r=s.substring(s.indexOf("platformCode=")+13),n=Number(a.value.data.data);isNaN(n)&&(n=0),t.balance[r]=n,t.gameBalance=t.formatNum(t.gameBalance+n,2)}else{var i=a.reason.config.url,c=i.substring(i.indexOf("platformCode=")+13);t.errorMsg.push(e.find((function(t){return t.platformCode===c})).platformName)}})),t.showProgress(!1),t.errorMsg.length?setTimeout((function(){return t.$dialog.confirm({title:t.$$t("_1"),message:t.errorMsg.join()+", "+t.$$t("_2")}).then((function(){})).catch((function(){}))}),0):setTimeout((function(){return t.$success(t.$t("common.transformSuccess"))}),0),t.initMemberData()}))}},onGetOpenPlatforms:function(){var t=this;this.$get("/api/Game/GetOpenPlatforms").then((function(e){return t.checkResp(e,(function(t){return!0===t.data.success}))})).then((function(e){t.platforms=e.data,t.onLoad(e.data)})).catch((function(e){t.procError(e)}))},refreshBalance:function(){var t=this;this.refreshIcon=!this.refreshIcon,setTimeout((function(){t.refreshIcon=!t.refreshIcon}),1e3),this.initMemberData(),this.onLoad(this.platforms)},redirectWithdraw:function(t){var e=this,a=this.memberData&&this.memberData.memberType;if(!this.isDottedMember())return 2===a&&"withdraw"!==t?this.$error(this.$t("common.isDotted")):void("withdraw"===t?this.$post("/api/Withdraw/GetWithdrawMoneyShowInfo").then((function(t){return e.checkResp(t,(function(t){return!0===t.data.success}))})).then((function(){e.$router.push("withdraw")})).catch((function(t){1===Number(t.message)?e.$router.push("bank/add"):2===Number(t.message)&&e.$dialog.confirm({title:e.$t("common.point"),message:e.$$t("pwdDesc")}).then((function(){e.$router.push("setWithdrawalPwd")}))})):this.$router.push(t))},$$t:function(t){return this.$t("purses."+t)}}},r=(a("ae60"),a("2877")),n=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"purses"}},[a("scroller",[a("div",{staticClass:"px-4 mt-3"},[a("div",{staticClass:"warp background-white text-left pa-4 radius-1"},[a("div",{staticClass:"flex space-between"},[a("div",[a("div",{staticClass:"body-2 text-grey"},[t._v(t._s(t.$$t("total")))]),a("div",{staticClass:"mt-2 money-number"},[a("span",{staticClass:"caption"},[t._v(t._s(t.currencySymbol))]),t._v(" "+t._s(t.formatNum(t.memberData&&t.memberData.balance+t.gameBalance,2))+t._s(t.currencyDenomination)+" ")])]),a("div",{staticClass:"mt-3 px-5 btn radius-4 text-white",on:{click:function(e){return t.redirectWithdraw("recharge")}}},[t._v(" "+t._s(t.$$t("deposit"))+" ")])]),a("van-row",{staticClass:"mt-6 text-grey",attrs:{type:"flex",justify:"space-between"}},[t._l(t.navs,(function(e,s){return[a("van-col",{key:s,attrs:{span:"8"}},[a("div",{staticClass:"text-center",on:{click:function(a){return t.redirectWithdraw(e.link)}}},[a("van-image",{attrs:{src:"/images/member/purses/"+e.img+".png",width:"40"}}),a("div",[t._v(t._s(e.text))])],1)])]}))],2),t.skgCode===t.skgGameCode?a("div",{staticClass:"body-2 mt-10 flex text-grey align-items-center space-between"},[a("div",{staticClass:"flex align-items-center"},[a("span",{staticClass:"mr-2"},[t._v(t._s(t.$$t("walletDetails")))]),a("van-icon",{class:{refresh:t.refreshIcon},attrs:{name:"/images/member/purses/refresh.png",size:"18"},on:{click:t.refreshBalance}})],1),a("div",{on:{click:t.onTransformAll}},[t._v(t._s(t.$$t("recycle")))])]):t._e(),t.skgCode===t.skgGameCode?a("van-row",{staticClass:"mt-5 purse-details",attrs:{type:"flex",justify:"center"}},[a("van-col",{attrs:{span:"12"}},[a("div",{staticClass:"text-center"},[a("div",{staticClass:"flex justify-content-center align-items-center"},[a("van-image",{attrs:{src:"/images/member/purses/purse.png",width:"16",height:"14"}}),a("div",{staticClass:"caption text-grey ml-1"},[t._v(t._s(t.$$t("centralWallet")))])],1),a("div",{staticClass:"subtitle-4 main-text mt-1"},[t._v(t._s(t.currencySymbol)+t._s(t.memberData&&t.memberData.balance)+t._s(t.currencyDenomination)+" ")])])]),a("van-col",{attrs:{span:"12"}},[a("div",{staticClass:"text-center"},[a("div",{staticClass:"flex justify-content-center align-items-center"},[a("van-image",{attrs:{src:"/images/member/purses/purse.png",width:"16",height:"14"}}),a("div",{staticClass:"caption text-grey ml-1"},[t._v(t._s(t.$$t("gameWallet")))])],1),a("div",{staticClass:"subtitle-4 main-text mt-1"},[t._v(" "+t._s(t.gameBalance>0?t.currencySymbol+t.gameBalance+t.currencyDenomination:"——")+" ")])])])],1):t._e(),a("van-divider",{staticClass:"mt-2"}),a("van-row",{staticClass:"mt-6 games",attrs:{type:"flex",align:"center"}},[t._l(t.platforms,(function(e,s){return[a("van-col",{key:s,class:{purse:s%4},attrs:{span:"6"}},[a("div",{staticClass:"text-center py-3 px-2"},[a("div",{staticClass:"caption"},[t._v(t._s(e.platformName))]),a("div",{staticClass:"caption text-grey mt-1"},[t._v(t._s(t.currencySymbol)+t._s(t.balance&&t.balance[e.platformCode]||0)+t._s(t.currencyDenomination)+" ")])])])]}))],2)],1)])])],1)}),[],!1,null,"776cd96c",null);e.default=n.exports},ae60:function(t,e,a){"use strict";a("fb7a")},fb7a:function(t,e,a){}}]);